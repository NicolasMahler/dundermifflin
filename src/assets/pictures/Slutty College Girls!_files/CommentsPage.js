(window.webpackJsonp=window.webpackJsonp||[]).push([["CommentsPage"],{"./node_modules/lodash/_baseDelay.js":function(e,t){var n="Expected a function";e.exports=function(e,t,o){if("function"!=typeof e)throw new TypeError(n);return setTimeout(function(){e.apply(void 0,o)},t)}},"./node_modules/lodash/_baseReduce.js":function(e,t){e.exports=function(e,t,n,o,r){return r(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)}),n}},"./node_modules/lodash/defer.js":function(e,t,n){var o=n("./node_modules/lodash/_baseDelay.js"),r=n("./node_modules/lodash/_baseRest.js")(function(e,t){return o(e,1,t)});e.exports=r},"./node_modules/lodash/uniqueId.js":function(e,t,n){var o=n("./node_modules/lodash/toString.js"),r=0;e.exports=function(e){var t=++r;return o(e)+t}},"./src/app/components/StyledHtml/index.less":function(e,t,n){},"./src/app/components/StyledHtml/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d});n("./node_modules/react/index.js"),n("./src/app/components/StyledHtml/index.less");var o,r=n("./src/config.ts"),i=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),s=function(e){return e.replace(new RegExp('href="/u',"gi"),'target="_blank" href="'+r.a.redditUrl+"/u").replace(new RegExp('href="/r',"gi"),'target="_blank" href="'+r.a.redditUrl+"/r")};function d(e){var t=e.html;return i("div",{className:"StyledHtml",dangerouslySetInnerHTML:{__html:s(t)}})}},"./src/app/helpers/describeApiError/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./src/app/strings/index.ts"),r=n("./src/lib/constants/index.ts");function i(e){var t=e.apiError,n=e.isLoggedOut,i=e.language;switch(t.type){case r.C.AUTHORIZATION_ERROR:return n?Object(o.a)(i,"error.type.notLoggedIn"):Object(o.a)(i,"error.type.notAuthorized");case r.C.VALIDATION_ERROR:return Object(o.a)(i,"error.type.validation");case r.C.NOT_FOUND_ERROR:return Object(o.a)(i,"error.type.notFound");case r.C.SERVER_ERROR:return Object(o.a)(i,"error.type.server");case r.C.LIKELY_UBLOCK_ERROR:return Object(o.a)(i,"error.type.blocked");default:return Object(o.a)(i,"error.type.generic")}}},"./src/lib/performanceTimings/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});var o,r,i=n("./src/lib/constants/index.ts"),s=n("./src/telemetry/helpers/sendTiming.ts"),d=n("./src/lib/performance.js");function c(e,t){var n=function(){if(!d.a||!d.a.timing)return null;var e=d.a.timing,t={timeToFirstByte:e.responseStart-e.requestStart,timeToInteractive:e.domInteractive-e.requestStart};if(d.a.getEntriesByType){var n=d.a.getEntriesByType("paint");if(n.length){var o=n.find(function(e){return"first-contentful-paint"===e.name});t.timeToFirstContentfulPaint=o.startTime}}return t}();if(n){var o={name:e,isLoggedIn:t};Object(s.a)(i.n.Redesign,{data:n,meta:o,type:"perf"})}}!function(e){e.CommentsPage="comments-page",e.FrontPage="frontpage",e.Subreddit="subreddit"}(o||(o={})),function(e){e.apiTiming="apiTiming",e.serverSideRender="serverSideRender",e.setupTiming="setupTiming"}(r||(r={}))},"./src/lib/unicodeUtils/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var o=function(e){var t=0,n=0,o=[0],r=!0,i=!1,s=void 0;try{for(var d,c=e[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){t++,n+=d.value.length,o[t]=n}}catch(e){i=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw s}}return o},r=function(e){var t=0,n=0,o=[],r=!0,i=!1,s=void 0;try{for(var d,c=e[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){for(var a=d.value,l=0;l<a.length;l++)o[n]=t,n++;t++}}catch(e){i=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw s}}return o[n]=t,o}},"./src/reddit/components/ClassicPost/Thumbnail.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return u});n("./node_modules/react/index.js");var o,r=n("./bundled-modules/styled-components/styled-components.min.js"),i=n("./src/lib/classNames/index.ts"),s=n("./src/reddit/components/Thumbnail/index.tsx"),d=n("./src/reddit/constants/posts.ts"),c=n("./src/reddit/helpers/styles/mixins/index.tsx"),a=n("./src/reddit/components/ClassicPost/index.m.less"),l=n.n(a),p=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),u=Object(r.css)(["","."," {","","}"],s.c,l.a.thumbnailContainer,Object(c.x)(d.c,d.d),c.c);t.b=function(e){var t=e.className,n=e.crosspost,o=e.forceShowNSFW,r=e.post,d=e.templatePlaceholderImage,c=e.url;return p("div",{className:Object(i.a)(l.a.thumbnailContainer,t)},void 0,p(s.d,{className:l.a.thumbnail,crosspost:n,post:r,forceShowNSFW:o,templatePlaceholderImage:d,url:c}))}},"./src/reddit/components/ClassicPost/index.m.less":function(e,t,n){e.exports={classicThumbnail:"nL7Q54U2LLg9rkVdSxxLe",content:"_1Y6dfr4zLlrygH-FLmr8x-",crosspostMediaWrapper:"_1qc1-Anfrhr6APGcBKFk8M",expandoContainer:"_3r40yytzBnldjGGOrs2mCw",flatlist:"ssgs3QQidkqeycI33hlBa",flatlistContainer:"_36kpXQ-z7Hr61j8878uRkP",flatlistSeparator:"_1wDt70OnYnqsrm0XIsNn8v",leftExpando:"_35zWJjb5RJMIMkexZ2Prus",mainBody:"_2XDITKxlj4y3M99thqyCsO",rightExpando:"_2Ddj1d6vOe9NlJqkdothNe",spacer:"iRkLLvxarfGu_2c7HxhW0",thumbnail:"_2e9Lv1I3dOmICVO9fg3uTG",thumbnailContainer:"_38EcSQ9jzVrdtzkXO1cydX"}},"./src/reddit/components/ContentGate/index.tsx":function(e,t,n){"use strict";var o=n("./src/config.ts"),r=(n("./node_modules/react/index.js"),n("./node_modules/react-redux/es/index.js")),i=n("./node_modules/react-router/es/index.js"),s=n("./node_modules/reselect/lib/index.js"),d=n("./bundled-modules/styled-components/styled-components.min.js"),c=n.n(d),a=n("./src/app/components/StyledHtml/index.tsx"),l=n("./src/app/strings/index.ts"),p=n("./src/lib/loginHref/index.ts"),u=n("./src/reddit/actions/contentGate.ts"),m=n("./src/reddit/actions/preferences.ts"),f=n("./src/reddit/components/Footer/index.tsx"),h=n("./src/reddit/constants/componentSizes.ts"),g=n("./src/reddit/controls/Button/index.tsx"),b=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),v=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),y=n("./src/reddit/selectors/meta.ts"),x=n("./src/reddit/selectors/user.ts");n.d(t,"a",function(){return j});var O,w=(O="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===i)t.children=o;else if(i>1){for(var d=Array(i),c=0;c<i;c++)d[c]=arguments[c+3];t.children=d}return{$$typeof:O,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});function C(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,i){try{var s=t[r](i),d=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(d).then(function(e){o("next",e)},function(e){o("throw",e)});e(d)}("next")})}}var j,I=c.a.div.withConfig({componentId:"s1ylg6yr-0"})(["display: flex;justify-content: center;margin-left: auto;margin-right: auto;"]),S=c.a.div.withConfig({componentId:"s1ylg6yr-1"})(["background-color: ",";align-items: center;display: flex;flex-direction: column;justify-content: center;min-height: 100vh;"],function(e){return Object(v.c)(e).canvas}),k=c.a.p.withConfig({componentId:"s1ylg6yr-2"})(["","color: ",";margin-top: 0;margin-bottom: 32px;"],b.titleFontH5,function(e){return Object(v.c)(e).bodyText}),P=c()(g.d).withConfig({componentId:"s1ylg6yr-3"})(["width: ","px;"],150),T=c()(g.c).withConfig({componentId:"s1ylg6yr-4"})(["width: ","px;"],150),E=c()(g.g).withConfig({componentId:"s1ylg6yr-5"})(["width: ","px;"],150),_=c()(g.f).withConfig({componentId:"s1ylg6yr-6"})(["width: ","px;"],150),R=c.a.div.withConfig({componentId:"s1ylg6yr-7"})(["margin-bottom: 25px;"]),M=c()(P).withConfig({componentId:"s1ylg6yr-8"})(["margin-top: 12px;"]),L=c.a.img.withConfig({componentId:"s1ylg6yr-9"})(["height: 128px;margin: 0px auto;width: 240px;"]),N=c.a.img.withConfig({componentId:"s1ylg6yr-10"})(["background-color: #a8a8a8;border-radius: 100%;height: 100px;margin-left: auto;margin-right: auto;width: 100px;"]),A=c()(P).withConfig({componentId:"s1ylg6yr-11"})(["margin-right: ","px;"],24),D=c()(T).withConfig({componentId:"s1ylg6yr-12"})(["margin-right: ","px;"],24),F=c()(_).withConfig({componentId:"s1ylg6yr-13"})(["margin-right: ","px;"],24),H=c()(E).withConfig({componentId:"s1ylg6yr-14"})(["margin-right: ","px;"],24),z=c.a.h3.withConfig({componentId:"s1ylg6yr-15"})(["","color: ",";margin-top: 32px;margin-bottom: 20px;"],b.titleFontH3,function(e){return Object(v.c)(e).bodyText}),B=c.a.div.withConfig({componentId:"s1ylg6yr-16"})(["align-items: center;display: flex;justify-content: center;margin-left: auto;margin-right: auto;max-width: ","px;text-align: center;"],h.f);!function(e){e.GoldSubreddit="GoldSubreddit",e.Nsfw="Nsfw",e.PrivateSubreddit="PrivateSubreddit",e.QuarantinedSubreddit="QuarantinedSubreddit",e.SubredditBanned="SubredditBanned",e.SubredditDoesNotExist="SubredditDoesNotExist"}(j||(j={}));var q=Object(s.createStructuredSelector)({language:x.z,origin:y.b,user:x.g}),W=Object(r.connect)(q,function(e,t){var n,o,r=t.subredditName;return{continueToQuarantinedSubreddit:(o=C(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(m.w(r));case 2:window.location.reload();case 3:case"end":return t.stop()}},t,void 0)})),function(){return o.apply(this,arguments)}),setCookieAndRedirect:(n=C(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(u.g());case 2:window.location.reload();case 3:case"end":return t.stop()}},t,void 0)})),function(){return n.apply(this,arguments)})}}),K=function(e){var t=e.banMessage,n=e.contentGateType,r=e.continueToQuarantinedSubreddit,i=e.language,s=e.location,d=e.origin,c=e.quarantineRequiresEmail,u=e.setCookieAndRedirect,m=e.subredditName,f=e.user;switch(n){case j.GoldSubreddit:return w("div",{},void 0,w(L,{src:o.a.assetPath+"/img/content-gate-icons/gold.png"}),w(z,{},void 0,Object(l.a)(i,"contentGate.goldSubreddit.title",{subredditName:m})),w(k,{},void 0,Object(l.a)(i,"contentGate.goldSubreddit.description")),w(I,{},void 0,f?w(F,{href:o.a.redditUrl+"/gold"},void 0,Object(l.a)(i,"contentGate.goldSubreddit.getGold")):w(D,{href:Object(p.a)(s,d)},void 0,Object(l.a)(i,"contentGate.goldSubreddit.signUp")),f?w(P,{to:"/"},void 0,Object(l.a)(i,"contentGate.goldSubreddit.goHome")):w(_,{href:Object(p.a)(s,d)},void 0,Object(l.a)(i,"contentGate.goldSubreddit.login"))));case j.Nsfw:return w("div",{},void 0,w(L,{src:o.a.assetPath+"/img/content-gate-icons/nsfw.png"}),w(z,{},void 0,Object(l.a)(i,"contentGate.over18.title")),w(k,{},void 0,Object(l.a)(i,"contentGate.over18.description")),w(I,{},void 0,w(A,{to:"/"},void 0,Object(l.a)(i,"common.no")),w(_,{onClick:u},void 0,Object(l.a)(i,"common.yes"))));case j.PrivateSubreddit:return w("div",{},void 0,w(L,{src:o.a.assetPath+"/img/content-gate-icons/private.png"}),w(z,{},void 0,Object(l.a)(i,"contentGate.privateSubreddit.title",{subredditName:m})),w(k,{},void 0,Object(l.a)(i,"contentGate.privateSubreddit.description")),w(I,{},void 0,f?w(F,{href:o.a.redditUrl+"/message/compose?to=/r/"+m},void 0,Object(l.a)(i,"contentGate.privateSubreddit.messageMods")):w(F,{href:Object(p.a)(s,d)},void 0,Object(l.a)(i,"contentGate.goldSubreddit.signUp")),w(P,{to:"/"},void 0,f?Object(l.a)(i,"contentGate.privateSubreddit.goHome"):Object(l.a)(i,"contentGate.privateSubreddit.exploreReddit"))));case j.QuarantinedSubreddit:return w("div",{},void 0,w(L,{src:o.a.assetPath+"/img/content-gate-icons/quarantined.png"}),w(z,{},void 0,Object(l.a)(i,"contentGate.quarantinedSubreddit.title",{subredditName:m})),w(k,{},void 0,Object(l.a)(i,"contentGate.quarantinedSubreddit.description")),w(I,{},void 0,function(e,t,n,r){return e&&e.hasVerifiedEmail||!r?w(I,{},void 0,w(A,{to:"/"},void 0,Object(l.a)(t,"contentGate.quarantinedSubreddit.goHome")),w(_,{onClick:n},void 0,Object(l.a)(t,"contentGate.quarantinedSubreddit.continue"))):w(I,{},void 0,w(H,{to:"/"},void 0,Object(l.a)(t,"contentGate.quarantinedSubreddit.goHome")),w(T,{href:o.a.redditUrl+"/prefs/update"},void 0,Object(l.a)(t,"contentGate.quarantinedSubreddit.verifyEmail")))}(f,i,r,c)));case j.SubredditBanned:return w("div",{},void 0,w(L,{src:o.a.assetPath+"/img/content-gate-icons/banned.png"}),w(z,{},void 0,Object(l.a)(i,"contentGate.subredditBanned.title",{subredditName:m})),function(e,t){return e?w(R,{},void 0,w(a.a,{html:(n=e,n.replace(/\[(.+?)\]\((.+?)\)/g,"<a href='$2'>$1</a>"))})):w(k,{},void 0,Object(l.a)(t,"contentGate.subredditBanned.description"));var n}(t,i),w(I,{},void 0,w(P,{to:"/"},void 0,Object(l.a)(i,"contentGate.subredditBanned.exploreReddit"))));case j.SubredditDoesNotExist:return w("div",{},void 0,w(N,{}),w(z,{},void 0,Object(l.a)(i,"contentGate.subredditDoesNotExist.title",{subredditName:m})),w(I,{},void 0,w(M,{to:"/"},void 0,Object(l.a)(i,"contentGate.subredditDoesNotExist.goHome"))))}};t.b=W(Object(i.f)(function(e){return w(S,{},void 0,w("div",{},void 0,w(B,{},void 0,K(e))),w(f.a,{}))}))},"./src/reddit/components/MediumPost/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return K});n("./node_modules/react/index.js");var o,r=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/reselect/lib/index.js"),s=n("./bundled-modules/styled-components/styled-components.min.js"),d=n.n(s),c=n("./src/config.ts"),a=n("./src/app/actions/tooltip.ts"),l=n("./src/reddit/actions/post.ts"),p=n("./src/reddit/components/AdLinkWrapper/index.tsx"),u=n("./src/reddit/components/CallToActionButton/index.tsx"),m=n("./src/reddit/components/CompactPost/HorizontalVotes.tsx"),f=n("./src/reddit/components/Flatlist/index.tsx"),h=n("./src/reddit/components/LargePost/index.tsx"),g=n("./src/reddit/components/ModModeReports/index.tsx"),b=n("./src/reddit/components/ModModeReports/helpers.ts"),v=n("./src/reddit/components/PostBackgroundWrapper/index.tsx"),y=n("./src/reddit/components/PostContainer/index.tsx"),x=n("./src/reddit/components/PostTitle/index.tsx"),O=n("./src/reddit/components/PostTopLine/index.tsx"),w=n("./src/reddit/components/PostTopMeta/index.tsx"),C=n("./src/reddit/components/Thumbnail/index.tsx"),j=n("./src/reddit/constants/screenWidths.ts"),I=n("./src/reddit/contexts/InsideOverlay.tsx"),S=n("./src/reddit/contexts/PageLayer/index.tsx"),k=n("./src/reddit/controls/OutboundLink/styled.tsx"),P=n("./src/reddit/helpers/canRenderThumbnail.ts"),T=n("./src/reddit/helpers/hasModFlairPermissions/index.ts"),E=n("./src/reddit/helpers/hasModPostPermissions/index.ts"),_=n("./src/reddit/helpers/styles/mixins/index.tsx"),R=n("./src/reddit/models/Vote/index.ts"),M=n("./src/reddit/selectors/moderatorPermissions.ts"),L=n("./src/reddit/selectors/posts.ts"),N=n("./src/reddit/selectors/user.ts"),A=n("./src/reddit/components/SourceLink/index.tsx"),D=n("./src/reddit/helpers/styles/mixins/responsive.ts"),F=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),H=d.a.article.withConfig({componentId:"s1wkwgow-0"})(["display: flex;flex-direction: row;padding-bottom: 8px;"]),z=d()(g.a).withConfig({componentId:"s1wkwgow-1"})(["margin-top: 10px;"]),B=d.a.div.withConfig({componentId:"s1wkwgow-2"})(["display: flex;flex: 1 1 100%;flex-direction: column;padding-bottom: ","px;position: relative;word-break: break-word;"],22),q=d()(x.c).withConfig({componentId:"s1wkwgow-3"})(["margin: 0 8px;"]),W=d.a.div.withConfig({componentId:"s1wkwgow-4"})(["","border-radius: 2px;padding: 0px 8px;"],Object(_.x)(108,144)),K=function(e){var t=e.post,n=e.forceShowNSFW,o=e.templatePlaceholderImage;return F(W,{},void 0,F(C.d,{post:t,forceShowNSFW:n,templatePlaceholderImage:o}))},U=d()(m.a).withConfig({componentId:"s1wkwgow-5"})(["max-height: 24px;",""],D.a),$=d.a.div.withConfig({componentId:"s1wkwgow-6"})(["align-items: center;display: flex;flex-direction: row;"]),V=d()(v.b).withConfig({componentId:"s1wkwgow-7"})(["padding-top: 8px;"]),G=Object(S.q)({isCommentsPage:S.t,isOriginalPage:S.x,pageLayer:function(e){return e}}),J=Object(r.connect)(function(){return Object(i.createStructuredSelector)({crosspost:L.b,currentUser:N.g,flairStyleTemplate:S.J,hideNSFWPref:N.p,post:L.x,isActive:L.e,language:N.z,moderatorPermissions:M.e,modModeEnabled:S.H,showMedia:S.o,subredditOrProfile:L.H,userIsOp:N.N})},function(e,t){var n=t.postId;return{handleVote:function(t){return t===R.a.upvoted?e(Object(l.F)(n)):e(Object(l.m)(n))},onIgnoreReports:function(){return e(Object(l.D)(n))},onOpenReportsDropdown:function(t){return e(Object(a.e)({tooltipId:t}))}}});t.b=G(J(d()(Object(I.b)(function(e){var t=e.className,n=e.crosspost,o=e.currentUser,r=e.eventFactory,i=e.flairStyleTemplate,s=e.hideNSFWPref,d=e.inSubredditOrProfile,a=void 0!==d&&d,l=e.isCommentsPage,m=e.isCheckboxSelected,g=e.isOverlay,v=e.isOriginalPage,C=e.language,j=e.moderatorPermissions,I=e.modModeEnabled,S=e.onClickPost,_=e.onIgnoreReports,R=e.onOpenReportsDropdown,M=e.post,L=e.subredditOrProfile,N=e.showBulkActionCheckbox,D=e.showMedia,W=e.toggleCheckbox,G=e.userIsOp,J=Object(E.a)(j),Q=Object(T.a)(j),Y="subreddit"===M.belongsTo.type,X=G&&!!Y,Z=Object(b.c)(M),ee=Object(P.a)(M),te=a&&!D,ne=te&&!!M.source&&!n;return F(y.a,{className:t,post:M,onClick:S,eventFactory:r},void 0,Object(h.b)(M,e.handleVote,N,m,W,i),F(V,{flairStyleTemplate:i},void 0,F(H,{},void 0,F(B,{"data-click-id":"body"},void 0,F(O.a,{hideNSFWPref:s,inSubredditOrProfile:a,isOverlay:!!g,language:C,post:M,showCornerOutboundLink:ne,showOCCategories:v,showSubreddit:!a&&!M.isSponsored,subredditOrProfile:L}),F(q,{post:M,size:x.b.Large,titleColor:i&&i.postTitleColor}),M.source&&!M.isSponsored&&!n&&F(A.a,{post:M,isCommentsPage:l})),!te&&ee&&F(K,{post:n||M,templatePlaceholderImage:i&&i.postPlaceholderImage})),M.source&&M.source.url&&M.isSponsored&&F(p.a,{},void 0,F(k.a,{href:M.source.url.replace(c.a.redditUrl,""),isSponsored:M.isSponsored,source:M.source},void 0,M.source.displayText),M.callToAction&&F(u.a,{href:M.source.url.replace(c.a.redditUrl,""),isSponsored:M.isSponsored,source:M.source,isNotCardView:!0},void 0,M.callToAction)),I&&J&&Z&&F(z,{language:C,onIgnoreReports:_,reportable:M}),F($,{},void 0,F(U,{compact:!1,flairStyleTemplate:i,model:M,onVoteClick:e.handleVote}),F(f.c,{currentUser:o,hasModFlairPerms:Q,hasModPostPerms:J,isOverlay:!!g,language:C,modModeEnabled:I,onIgnoreReports:_,onOpenReportsDropdown:R,post:M,showEditFlair:X,tooltipType:g?w.c.Lightbox:void 0}))))})).withConfig({componentId:"s1wkwgow-8"})(["","","","","","",";@media (min-width: ","px) {padding-left: 40px;border-radius: 4px;}"],C.e,_.n,_.m,v.a,f.d,function(e){return Object(_.j)(e.flairStyleTemplate)},j.h)))},"./src/reddit/components/RichTextJson/SpoilerText.tsx":function(e,t,n){"use strict";var o,r=n("./node_modules/react/index.js"),i=n.n(r),s=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/reselect/lib/index.js"),c=n("./bundled-modules/styled-components/styled-components.min.js"),a=n.n(c),l=n("./src/app/strings/index.ts"),p=n("./src/higherOrderComponents/asTooltip.tsx"),u=n("./src/reddit/components/InfoTextTooltip/index.tsx"),m=n("./src/reddit/contexts/InsideOverlay.tsx"),f=n("./src/reddit/helpers/getOverlayContainerById/index.ts"),h=n("./src/reddit/selectors/user.ts"),g=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var v=["left","top"],y=["left","bottom"],x=a.a.span.withConfig({componentId:"emsaoq-0"})(["opacity: 0;transition: opacity ease-out 1s;"]),O=a.a.span.withConfig({componentId:"emsaoq-1"})(["// Workaround for chrome to fix tooltip position when\n// spoiler text starts with space\n&:before {content: '';position: absolute;visibility: hidden;}"]),w=a.a.span.withConfig({componentId:"emsaoq-2"})(["border-radius: 2px;transition: background ease-out 1s;",""," {opacity: ",";}"],function(e){return e.isOpen?"\n    background: rgba(84, 84, 82, 0.1);\n  ":"\n    background: #545452;\n    cursor: pointer;\n  "},x,function(e){return e.isOpen?1:0}),C=Object(p.a)(a()(u.a).withConfig({componentId:"emsaoq-3"})(["animation-duration: .1s;&:after {left: 10px;}"]),["click","keydown"]),j=Object(d.createStructuredSelector)({language:h.z}),I=Object(s.connect)(j),S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=function(e){n.state.isOpen||(e.preventDefault(),e.stopPropagation(),n.setState({isOpen:!0}))},n.setTooltipTargetRef=function(e){return n.tooltipTargetElement=e},n.onShowTooltip=function(){n.state.isOpen||n.setState({showTooltip:!0})},n.onHideTooltip=function(){n.setState({showTooltip:!1})},n.state={isOpen:!1,showTooltip:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),b(t,[{key:"render",value:function(){var e=this.props,t=e.isOverlay,n=e.language,o=this.state,r=o.isOpen,i=o.showTooltip,s=Object(f.a)(t);return g(w,{isOpen:r,onMouseEnter:this.onShowTooltip,onMouseLeave:this.onHideTooltip,onClick:this.onClick},void 0,g(x,{},void 0,g(O,{innerRef:this.setTooltipTargetRef}),g(C,{container:s,isOpen:i,tooltipTarget:this.tooltipTargetElement,text:Object(l.a)(n,"posts.spoilerRevealTooltip"),targetPosition:v,tooltipPosition:y}),this.props.children))}}]),t}();t.a=I(Object(m.b)(S))},"./src/reddit/components/RichTextJson/elements.tsx":function(e,t,n){"use strict";n.d(t,"w",function(){return p}),n.d(t,"e",function(){return u}),n.d(t,"h",function(){return m}),n.d(t,"k",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"j",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"v",function(){return v}),n.d(t,"i",function(){return y}),n.d(t,"b",function(){return x}),n.d(t,"f",function(){return O}),n.d(t,"u",function(){return w}),n.d(t,"d",function(){return C}),n.d(t,"l",function(){return j}),n.d(t,"m",function(){return I}),n.d(t,"n",function(){return S}),n.d(t,"t",function(){return k}),n.d(t,"p",function(){return T}),n.d(t,"o",function(){return E}),n.d(t,"q",function(){return _}),n.d(t,"s",function(){return R}),n.d(t,"r",function(){return M}),n.d(t,"a",function(){return L});var o=n("./node_modules/polished/dist/polished.es.js"),r=n("./node_modules/react/index.js"),i=n.n(r),s=n("./bundled-modules/styled-components/styled-components.min.js"),d=n.n(s),c=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),a=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=[d.a.h1.withConfig({componentId:"s570a4-0"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH1),d.a.h2.withConfig({componentId:"s570a4-1"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH2),d.a.h3.withConfig({componentId:"s570a4-2"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH3),d.a.h4.withConfig({componentId:"s570a4-3"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH4),d.a.h5.withConfig({componentId:"s570a4-4"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH5),d.a.h6.withConfig({componentId:"s570a4-5"})(["","margin-bottom: 8px;margin-top: 1.4em;"],c.bodyFontH6)],u=d.a.hr.withConfig({componentId:"s570a4-6"})(["border: 0;border-top: 1px solid ",";height: 1px;margin: 8px 0;"],function(e){return Object(o.e)(Object(a.c)(e).bodyText,.2)}),m=d.a.code.withConfig({componentId:"s570a4-7"})(["","background: rgba(238, 238, 238, 0.8);color: #FF006D;margin: 0 2px;max-width: 100%;overflow: auto;"],c.bodyFontMono),f=d.a.pre.withConfig({componentId:"s570a4-8"})(["background: rgba(238, 238, 238, 0.8);display: grid;line-height: 1.4;margin: 4px 0;max-width: 100%;overflow: auto;padding: 8px;> "," {background-color: transparent;color: #222;margin: 0;}"],m),h=d.a.blockquote.withConfig({componentId:"s570a4-9"})(["border-left: 4px solid ",";margin: 4px 0 4px 8px;padding-left: 8px;"],function(e){return Object(o.e)(Object(a.c)(e).bodyText,.2)}),g=d.a.p.withConfig({componentId:"s570a4-10"})(["padding: 0.25em 0;&:first-child {padding-top: 0;}&:last-child {padding-bottom: 0;}"]),b=d.a.li.withConfig({componentId:"s570a4-11"})(["margin: 0.4em 1em;"," {padding: 0;}"],g),v=d.a.ul.withConfig({componentId:"s570a4-12"})(["list-style: disc outside;margin: 4px 0 4px 8px;& & {list-style-type: circle;}& & & {list-style-type: square;}"]),y=d.a.ol.withConfig({componentId:"s570a4-13"})(["list-style: decimal outside;margin: 4px 0 4px 8px;& & {list-style-type: lower-alpha;}& & & {list-style-type: lower-roman;}"]),x=d.a.strong.withConfig({componentId:"s570a4-14"})(["font-weight: 700;"]),O=d.a.em.withConfig({componentId:"s570a4-15"})(["font-style: italic;"]),w=d.a.span.withConfig({componentId:"s570a4-16"})(["text-decoration: underline;"]),C=function(e){return i.a.createElement("del",e)},j=d.a.sub.withConfig({componentId:"s570a4-17"})(["position: relative;bottom: -0.4em;font-size: 0.7em;line-height: 0.7em;"]),I=d.a.sup.withConfig({componentId:"s570a4-18"})(["position: relative;top: -0.4em;font-size: 0.7em;line-height: 0.7em;"]),S=d.a.table.withConfig({componentId:"s570a4-19"})(["border: 2px solid #EEEEEE;border-collapse: collapse;display: inline-block;margin-bottom: 4px;margin-top: 4px;overflow-x: auto;word-break: normal;"]),k=d.a.tr.withConfig({componentId:"s570a4-20"})(["border: 1px solid #EEEEEE;&:nth-child(even) {background-color: ",";}&:nth-child(odd) {background-color: ",";}"],function(e){return Object(o.e)(Object(a.c)(e).body,.8)},function(e){return Object(o.e)(Object(a.c)(e).body,.8)}),P="\n  border: 1px solid #EEEEEE;\n  color: "+function(e){return Object(a.c)(e).bodyText}+";\n  padding: 4px 8px;\n",T=d.a.td.withConfig({componentId:"s570a4-21"})(["","background-color: ",";text-align: left;"],P,function(e){return Object(o.e)(Object(a.c)(e).body,.8)}),E=d.a.td.withConfig({componentId:"s570a4-22"})(["","text-align: center;"],P),_=d.a.td.withConfig({componentId:"s570a4-23"})(["","text-align: right;"],P),R=d.a.th.withConfig({componentId:"s570a4-24"})(["","text-align: left;"],P),M=d.a.th.withConfig({componentId:"s570a4-25"})(["","text-align: center;"],P),L=(d.a.th.withConfig({componentId:"s570a4-26"})(["","text-align: right;"],P),d()(function(e){return i.a.createElement("a",l({target:"_blank"},e))}).withConfig({componentId:"s570a4-27"})(["&, &:visited {color: ",";text-decoration: none;}"],function(e){return Object(a.c)(e).linkText}))},"./src/reddit/controls/ErrorText/index.tsx":function(e,t,n){"use strict";var o,r=n("./node_modules/lodash/uniqueId.js"),i=n.n(r),s=n("./node_modules/raf/index.js"),d=n.n(s),c=n("./node_modules/react/index.js"),a=n.n(c),l=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/reselect/lib/index.js"),u=n("./bundled-modules/styled-components/styled-components.min.js"),m=n.n(u),f=n("./src/app/strings/index.ts"),h=n("./src/reddit/actions/modal.ts"),g=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),b=n("./src/reddit/selectors/activeModalId.ts"),v=n("./src/higherOrderComponents/asModal.tsx"),y=n("./src/reddit/controls/Button/index.tsx"),x=n("./src/reddit/layout/row/Inline/index.tsx"),O=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),w=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),C=Object(f.d)("error.ok"),j=m.a.div.withConfig({componentId:"s18tv1r8-0"})(["box-sizing: border-box;border-radius: 4px;width: 350px;background-color: ",";border: 1px solid ",";border-radius: 4px;box-shadow: 0 0 0 1px ",",0px 2px 3px 2px ",";"],function(e){return Object(O.c)(e).body},function(e){return Object(O.c)(e).line},function(e){return Object(O.c)(e).line},function(e){return Object(O.c)(e).line}),I=m()(x.a).withConfig({componentId:"s18tv1r8-1"})(["","padding: 11px 16px;border-bottom: 1px solid ",";"],g.titleFontH4,function(e){return Object(O.c)(e).line}),S=m.a.div.withConfig({componentId:"s18tv1r8-2"})(["","padding: 16px;"],g.bodyFont),k=m()(x.a).withConfig({componentId:"s18tv1r8-3"})(["padding: 8px 5px;border-top: 1px solid ",";background: hsl(0, 0%, 98%);flex-direction: row-reverse;"],function(e){return Object(O.c)(e).line}),P=m()(y.b).withConfig({componentId:"s18tv1r8-4"})(["margin-left: 5px;"]),T=Object(v.a)(function(e){var t=e.children,n=e.language,o=e.title;return w(j,{},void 0,w(I,{},void 0,o),w(S,{},void 0,t),w(k,{},void 0,w(P,{onClick:e.onConfirmed},void 0,C(n))))});n.d(t,"b",function(){return z});var E=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var R=Object(f.d)("error.more"),M=Object(f.d)("error.error"),L=Object(f.d)("error.type.generic"),N=m.a.div.withConfig({componentId:"s2apn2n-0"})(["","color: #f00;padding-top: 4px;text-align: right;display: flex;"],g.metadataFont),A=m.a.span.withConfig({componentId:"s2apn2n-1"})(["white-space: nowrap;overflow: hidden;text-overflow: ellipsis;"]),D=m.a.span.withConfig({componentId:"s2apn2n-2"})(["text-decoration: underline;cursor: pointer;padding-left: 4px;"]),F=Object(p.createStructuredSelector)({activeModalId:b.a}),H=Object(l.connect)(F,function(e){return{toggleErrorTextModal:function(t){return e(Object(h.e)(t))}}})(function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calcTextDidOverflow=function(e){d()(function(){e&&e.scrollWidth>e.clientWidth&&n.setState({textHasOverflowed:!0})})},n.setRef=function(e){n.calcTextDidOverflow(e)},n.state={errorModalBody:e.errorModalBody||e.children,errorModalTitle:e.errorModalTitle||M(e.language),moreText:e.moreText||R(e.language),textHasOverflowed:!1,modalId:"ErrorTextModal--"+i()()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.activeModalId,r=e.language,i=e.toggleErrorTextModal,s=this.state,d=s.errorModalBody,c=s.errorModalTitle,a=s.modalId,l=s.moreText,p=s.textHasOverflowed;return E(N,{className:n},void 0,E(A,{innerRef:this.setRef},void 0,t),p&&E(D,{onClick:function(){return i(a)}},void 0,l),o===a&&E(T,{language:r,onConfirmed:function(){return i(a)},title:c},void 0,d))}}]),t}()),z=(t.a=H,function(e,t){return(e.length>0?e:[L(t)]).map(function(e){return E(H,{language:t},void 0,e)})})},"./src/reddit/helpers/canRenderThumbnail.ts":function(e,t,n){"use strict";var o="nsfw",r="self";function i(e){return!(!e.thumbnail||!e.thumbnail.url||e.thumbnail.url===r||e.thumbnail.url===o)}n.d(t,"a",function(){return i})},"./src/reddit/pages/CommentsPage/index.tsx":function(e,t,n){"use strict";n.r(t);var o,r=n("./node_modules/lodash/fromPairs.js"),i=n.n(r),s=n("./node_modules/lodash/get.js"),d=n.n(s),c=n("./node_modules/lodash/throttle.js"),a=n.n(c),l=n("./node_modules/polished/dist/polished.es.js"),p=n("./node_modules/react/index.js"),u=n.n(p),m=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/reselect/lib/index.js"),h=n("./bundled-modules/styled-components/styled-components.min.js"),g=n.n(h),b=n("./src/app/models/Draft.ts"),v=n("./src/app/strings/index.ts"),y=n("./node_modules/react-router-dom/es/index.js"),x=n("./src/reddit/controls/OverlayLink/index.tsx"),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},C=function(e){var t=e.isOverlay,n=w(e,["isOverlay"]),o=t?x.a:y.a;return u.a.createElement(o,O({},n,{children:n.children,className:n.className,onClick:n.onClick,to:n.to}))},j=n("./src/reddit/helpers/path/index.ts"),I=n("./src/reddit/icons/svgs/ArrowRight/index.tsx"),S=n("./src/telemetry/index.ts"),k=n("./src/telemetry/models/Timer.ts"),P=n("./src/lib/constants/index.ts"),T=n("./src/lib/domUtils/index.ts"),E=n("./src/lib/extractQueryParams/index.ts"),_=n("./src/lib/fastdom/index.ts"),R=n("./src/lib/makeCommentsPageKey/index.ts"),M=n("./src/lib/makeDraftKey/index.ts"),L=n("./src/lib/performanceTimings/index.tsx"),N=n("./src/app/actions/tooltip.ts"),A=n("./src/reddit/actions/comment.ts"),D=n("./src/reddit/actions/login.ts"),F=n("./src/reddit/actions/video.ts"),H=n("./src/reddit/components/BannerAd/index.tsx"),z=n("./src/reddit/contexts/PageLayer/index.tsx"),B=n("./src/reddit/featureFlags/index.ts"),q=n("./src/reddit/models/WhitelistStatus/index.ts"),W=n("./src/reddit/selectors/subreddit.ts"),K=n("./src/reddit/selectors/user.ts"),U=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});if(1===s)t.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var V=Object(f.createStructuredSelector)({shouldHideAds:function(e,t){var n=Object(W.m)(e,{subredditName:t.listingName});return!e.meta.isSessionSeo||B.d.rabbitHole(e)||Object(K.u)(e)||Object(z.C)(t.pageLayer)||Object(K.o)(e)||n&&n.wls!==q.a.ALL_ADS}}),G=Object(m.connect)(V),J=Object(z.q)(),Q=P.h[0],Y=g()(H.a).withConfig({componentId:"s1k97mcp-0"})(["text-align: center;width: ",';margin: 30px auto 50px auto;&:before {content: "advertisement";color: rgb(135, 138, 140);display: block;font-size: 10px;letter-spacing: 0.5px;line-height: 12px;text-transform: uppercase;padding-bottom: 4px;font-weight: 500;text-align: left;}'],Q+"px"),X=g.a.div.withConfig({componentId:"s1k97mcp-1"})(["margin: 0 auto;"]),Z=J(G(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={enoughSpace:!1,hasBeenAssessed:!1},e.checkAvailableSpace=a()(function(){_.a.read(function(){if(e.container){var t=P.h[0],n=e.container.clientWidth;!e.state.enoughSpace&&e.state.hasBeenAssessed||_.a.write(function(){e.setState({enoughSpace:n>t,hasBeenAssessed:!0})})}})},P.E),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),$(t,[{key:"componentDidMount",value:function(){this.props.shouldHideAds||(this.checkAvailableSpace(),window.addEventListener("resize",this.checkAvailableSpace))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.checkAvailableSpace)}},{key:"render",value:function(){var e=this;if(this.props.shouldHideAds)return null;var t=this.props,n=t.isOverlay,o=t.refreshKey,r=t.listingName,i=t.isPostNSFW,s=t.placement;return U(X,{innerRef:function(t){e.container=t}},void 0,this.state.enoughSpace&&U(Y,{id:function(e,t){var n="";return t&&(n+="overlay-"),n+="comment-"+e}(s,n),sizes:[P.h],placement:s,isPostNSFW:i,listingName:r,refreshKey:o}))}}]),t}())),ee=n("./src/reddit/components/ContentGate/index.tsx"),te=n("./src/reddit/components/PromoBanners/index.tsx"),ne=n("./src/reddit/components/StructuredStyles/BladeDrawerController/index.tsx"),oe=n("./src/reddit/constants/colors.ts"),re=n("./src/reddit/constants/componentSizes.ts"),ie=n("./src/reddit/constants/elementIds.ts"),se=n("./src/reddit/constants/history.ts"),de=n("./src/reddit/constants/parameters.ts"),ce=n("./src/reddit/constants/promos.ts"),ae=n("./src/reddit/contexts/TrackCommentsPageClick.ts"),le=n("./src/reddit/icons/fonts/Archived/index.tsx"),pe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),ue=n("./src/reddit/models/Comment/index.ts"),me=n("./src/reddit/models/Media/index.ts"),fe=n("./src/reddit/models/Post/index.ts"),he=n("./src/reddit/models/Theme/index.ts"),ge=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),be=n("./src/reddit/selectors/comments.ts"),ve=n("./src/reddit/selectors/meta.ts"),ye=n("./src/reddit/selectors/posts.ts"),xe=n("./src/reddit/selectors/tooltip.ts"),Oe=n("./src/reddit/components/AuthorHovercard/helpers.ts"),we=n("./src/higherOrderComponents/makeAsync.tsx"),Ce=n("./src/lib/loadWithRetries/index.ts"),je=n("./src/reddit/components/RichTextEditor/Placeholder.tsx"),Ie=n("./src/reddit/helpers/styles/components/index.tsx"),Se=n("./src/reddit/helpers/styles/mixins/loading.ts"),ke=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Pe=g()(Object(Ie.a)()).withConfig({componentId:"rae1fm-0"})(["margin: ",";"],function(e){return e.isTopLevelComment?"24px 40px":"16px 0"}),Te=g()(Object(Ie.a)()).withConfig({componentId:"rae1fm-1"})(["","height: 19px;margin-bottom: 4px;width: 150px;"],Se.a),Ee=Object(we.a)({ErrorComponent:function(e){var t=e.isTopLevelComment;return ke(Pe,{isTopLevelComment:t},void 0,ke(Te,{gradientType:"comments",isLoading:!1}),ke(je.a,{gradientType:"comments",isLoading:!1,toolbarPosition:"bottom"}))},getComponent:function(){return Object(Ce.a)(function(){return Promise.all([n.e("vendors~FlairEdit~PostCreation~RichTextEditor~UiDashboard"),n.e("vendors~PostCreation~RichTextEditor~UiDashboard"),n.e("PostCreation~RichTextEditor~UiDashboard"),n.e("RichTextEditor~UiDashboard"),n.e("RichTextEditor")]).then(n.bind(null,"./src/reddit/components/CommentCreation/index.tsx")).then(function(e){return e.default})})},LoadingComponent:function(e){var t=e.isTopLevelComment;return ke(Pe,{isTopLevelComment:t},void 0,ke(Te,{gradientType:"comments",isLoading:!0}),ke(je.a,{gradientType:"comments",isLoading:!0,toolbarPosition:"bottom"}))}}),_e=function(e){return u.a.createElement(Ee,e)},Re=n("./src/lib/isSimpleClick/index.ts"),Me=n("./src/lib/loginHref/index.ts"),Le=n("./src/reddit/controls/Button/index.tsx"),Ne=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),Ae=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),De=g.a.div.withConfig({componentId:"s6wlmco-0"})(["margin: 16px 26px 0 26px;display: flex;align-items: center;justify-content: space-between;border-radius: 4px;border: 1px solid ",";padding: 12px 8px;"],function(e){return Object(ge.c)(e).line}),Fe=g.a.span.withConfig({componentId:"s6wlmco-1"})(["","color: ",""],Ne.titleFontH4,function(e){return Object(ge.c)(e).metaText}),He=g()(Le.c).withConfig({componentId:"s6wlmco-2"})(["","",""],Ne.smallButtonFont,"\n  padding: 4px 9px 2px;\n  width: 100px;\n"),ze=g()(Le.f).withConfig({componentId:"s6wlmco-3"})(["","","margin-left: auto;margin-right: 8px;"],Ne.smallButtonFont,"\n  padding: 4px 9px 2px;\n  width: 100px;\n"),Be=function(e){e.className;var t=e.language,n=e.location,o=e.openLoginModal,r=e.openRegisterModal,i=e.origin;return Ae(De,{},void 0,Ae(Fe,{},void 0,Object(v.a)(t,"session.comment")),Ae(ze,{href:Object(Me.a)(n,i,"/login"),onClick:function(e){Object(Re.a)(e)&&(e.preventDefault(),e.stopPropagation(),o())},"data-redditstyle":!0},void 0,Object(v.a)(t,"session.login.submit")),Ae(He,{href:Object(Me.a)(n,i,"/register"),onClick:function(e){Object(Re.a)(e)&&(e.preventDefault(),e.stopPropagation(),r())},"data-redditstyle":!0},void 0,Object(v.a)(t,"session.register.submit")))},qe=n("./node_modules/lodash/isEqual.js"),We=n.n(qe),Ke=n("./src/reddit/constants/comments.ts"),Ue=n("./src/reddit/constants/elementClassNames.ts"),$e=n("./src/reddit/constants/zIndex.ts"),Ve=n("./src/reddit/icons/fonts/helpers.tsx"),Ge=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Je=g()(function(e){return Ge("i",{className:Object(Ve.b)("expand")+" "+e.className})}).withConfig({componentId:"qjrkk1-0"})(["display: inline-block;width: 12px;height: 12px;font-size: 12px;font-weight: 400;line-height: 12px;"]),Qe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Ye=g()(function(e){return u.a.createElement("button",e,Qe(Je,{}))}).withConfig({componentId:"gcap43-0"})(["background: none;border: none;cursor: pointer;height: 12px;line-height: 12px;outline: none;width: 12px;&."," {color: ",";}",""],Ue.f,function(e){return Object(ge.c)(e).line},function(e){return"color: "+Object(ge.c)(e).linkText+";\n      transform: rotate(180deg);\n      &:hover {\n        color: "+Object(ge.c)(e).linkText+";\n      }"}),Xe=n("./src/config.ts"),Ze=n("./node_modules/lodash/defer.js"),et=n.n(Ze),tt=n("./src/lib/makeCommentPermalink/index.ts"),nt=n("./src/reddit/actions/modal.ts"),ot=n("./src/reddit/actions/reportFlow.ts"),rt=n("./src/reddit/helpers/hasModPostPermissions/index.ts"),it=n("./src/reddit/helpers/trackers/lightbox.ts"),st=n("./src/reddit/selectors/activeModalId.ts"),dt=n("./src/reddit/selectors/moderatorPermissions.ts"),ct=n("./src/reddit/components/CommentModModeDropdown/index.tsx"),at=n("./src/reddit/components/Comments/Comment/ModToolsFlatlist/index.tsx"),lt=n("./src/reddit/components/ConfirmUserActionModal/index.tsx"),pt=n("./src/reddit/components/DistinguishCommentDropdown/index.tsx"),ut=n("./src/reddit/components/ModActionsMenu/index.tsx"),mt=n("./src/reddit/components/ModModeReports/helpers.ts"),ft=n("./src/reddit/components/OverflowMenu/index.tsx"),ht=n("./src/reddit/components/ReportFlow/index.tsx"),gt=n("./src/reddit/components/ShareMenu/index.tsx"),bt=n("./src/reddit/components/TrackingHelper/index.tsx"),vt=n("./src/reddit/components/ViewReportsDropdown/index.tsx"),yt=n("./src/reddit/contexts/InsideOverlay.tsx"),xt=n("./src/reddit/controls/CheckboxMenuItem/index.tsx"),Ot=n("./src/reddit/controls/Dropdown/Row.tsx"),wt=n("./src/reddit/helpers/trackers/modTools.ts"),Ct=n("./src/reddit/layout/row/Inline/index.tsx"),jt=n("./src/reddit/icons/fonts/Comment/index.tsx"),It=n("./src/reddit/icons/fonts/IgnoreReport/index.tsx"),St=n("./src/reddit/icons/fonts/ModActions/index.tsx"),kt=n("./src/reddit/icons/fonts/Report/index.tsx"),Pt=n("./src/reddit/icons/svgs/Trash2/index.tsx"),Tt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Et=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var _t=g()(jt.a).withConfig({componentId:"qzsqzl-0"})(["","color: #B7B9BA;display: inline-block;font-size: 14px;height: 12px;line-height: 13px;margin: 0px 6px 0px -1px;width: 12px;"],Ot.d),Rt=g()(Pt.a).withConfig({componentId:"qzsqzl-1"})(["","height: 12px;width: 12px;"],Ot.d),Mt=g()(St.a).withConfig({componentId:"qzsqzl-2"})(["","display: inline-block;height: 12px;width: 12px;"],Ot.d),Lt=Object(h.css)(["height: 12px;margin-top: -6px;padding-right: 4px;vertical-align: middle;width: 12px;"]),Nt=g()(kt.a).withConfig({componentId:"qzsqzl-3"})(["",""],Lt),At=g()(It.a).withConfig({componentId:"qzsqzl-4"})(["",""],Lt),Dt=g()(ut.a).withConfig({componentId:"qzsqzl-5"})(["cursor: pointer;height: 24px;margin-right: 8px;margin-top: -4px;"]),Ft=g()(Object(Ie.a)()).withConfig({componentId:"qzsqzl-6"})(["margin-right: ",";"],function(e){return e.modModeEnabled?"0px":"12px"}),Ht=g()(ft.a).withConfig({componentId:"qzsqzl-7"})(["font-weight: 500;","color: ",";"," {width: 16px;text-align: center;}"],Ne.titleFontH5,function(e){return Object(ge.c)(e).actionIcon},Ot.a),zt=g()(Ct.a).withConfig({componentId:"qzsqzl-8"})(["","color: ",";margin: 4px 0 8px;"],Ne.actionFont,function(e){return Object(ge.c)(e).actionIcon}),Bt=Object(h.css)(["display: inline-block;margin-right: 12px;transition: color 0.1s;&::first-letter {text-transform: uppercase;}&:disabled {cursor: default;}&:hover {text-decoration: underline;}"]),qt=Object(h.css)(["&.not(:disabled):hover {color: ",";}"],function(e){return Object(ge.c)(e).bodyText}),Wt=g()(g.a.button.withConfig({componentId:"qzsqzl-10"})(["",""],Bt)).withConfig({componentId:"qzsqzl-9"})(["",""],qt),Kt=g()(at.c).withConfig({componentId:"qzsqzl-11"})(["margin-left: 12px;&:before {content: '';position: absolute;border-left: 1px solid ",";height: 20px;margin: 6px 0px;}"],function(e){return Object(ge.c)(e).line}),Ut=g()(vt.a).withConfig({componentId:"qzsqzl-12"})(["display: inline-block;"]),$t=Object(z.q)(),Vt=function(e){return"Comment-"+e+"--Modal--DeleteComment"},Gt=function(e){return"Distinguish--Dropdown--"+e},Jt=function(e){return e+"-overflow-menu"},Qt=function(e){return"View--Reports--"+e},Yt=Object(f.createStructuredSelector)({activeTooltipId:xe.a,currentUser:K.g,isConfirmModalOpen:function(e,t){var n=t.comment;return Object(st.a)(e)===Vt(n.id)},isPendingDeletion:be.y,isLoggedIn:K.u,moderatorPermissions:function(e,t){var n=t.comment;return Object(z.g)(e,t)||Object(dt.f)(e,{subredditId:n.subredditId})},modModeEnabled:z.H,postIsArchived:function(e,t){var n=t.comment;return Object(ye.u)(e,{postId:n.postId})},postIsLocked:function(e,t){var n=t.comment;return Object(ye.v)(e,{postId:n.postId})},postPermalink:function(e,t){var n=t.comment;return Object(ye.w)(e,{postId:n.postId})},reportFlowIsOpen:function(e,t){var n=t.comment;return e.reportFlow.postOrCommentId===n.id},sendRepliesToggled:function(e,t){var n=t.comment;return Object(be.D)(e,{commentId:n.id})},subredditOrProfile:function(e,t){var n=t.comment;return Object(ye.H)(e,{postId:n.postId})}}),Xt=Object(m.connect)(Yt,function(e,t){var n=t.comment,o=t.commentsPageKey,r=t.language;return{deleteComment:function(){return o&&e(Object(A.Y)(r,n.id,o))},handleDelete:function(){e(Object(nt.e)(Vt(n.id))),e(Object(N.e)({tooltipId:Jt(n.id)}))},handleEdit:function(){var t=n.media&&n.media.rteMode;o&&e(Object(A.S)({commentId:n.id,draftKey:Object(M.a)(b.a.edit,n.id),text:n.bodyMD,commentMode:t,commentsPageKey:o}))},handleReply:function(){return o&&e(Object(A.Ja)({parentCommentId:n.id,commentsPageKey:o}))},onDistinguishComment:function(t,o){return e(Object(A.P)(n.id,t,o))},onIgnoreReports:function(){return e(Object(A.Ka)(n.id))},onReportClick:function(){return e(Object(ot.i)(n.id))},onToggleSave:function(){return e(Object(A.Ba)(n.id))},onToggleDistinguishDropdown:function(){return e(Object(N.e)({tooltipId:Gt(n.id)}))},onToggleReportsDropdown:function(){return e(Object(N.e)({tooltipId:Qt(n.id)}))},toggleDeleteCommentModal:function(){return e(Object(nt.e)(Vt(n.id)))},toggleSendReplies:function(){return e(Object(A.Ca)(n.id))}}}),Zt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.sendCommentEventWithName=function(t){return e.props.sendEvent(Object(it.b)(e.props.comment.postId,"comment_"+t))},e.sendCommentModEventWithName=function(t){return e.props.sendEvent(Object(wt.a)(t,e.props.comment.id))},e.sendCommentReportEvent=function(t){return e.props.sendEvent(Object(wt.e)(t,e.props.comment.id))},e.handleSave=function(){e.props.comment.isSaved?e.sendCommentModEventWithName("unsave"):e.sendCommentModEventWithName("save"),e.props.onToggleSave()},e.handleEdit=function(){e.props.sendEvent(Object(wt.d)("edit",e.props.comment.id)),e.props.handleEdit()},e.handleDelete=function(){e.props.sendEvent(Object(wt.d)("delete",e.props.comment.id)),e.props.toggleDeleteCommentModal()},e.handleReportClick=function(){e.props.sendEvent(Object(wt.a)("report",e.props.comment.id)),e.props.onReportClick()},e.handleDistinguishToggle=function(){e.props.sendEvent(Object(wt.a)("mod_distinguish_menu",e.props.comment.id)),e.props.onToggleDistinguishDropdown()},e.sendCommentDistinguishEvent=function(t){return e.props.sendEvent(Object(wt.b)(t,e.props.comment.id))},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),Et(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.comment,o=t.className,r=t.currentUser,i=t.deleteComment,s=t.handleReply,d=t.isOverlay,c=t.isLoggedIn,a=t.isPendingDeletion,l=t.language,p=t.onDistinguishComment,u=t.onIgnoreReports,m=t.onToggleReportsDropdown,f=t.moderatorPermissions,h=t.modModeEnabled,g=t.postIsArchived,b=t.postIsLocked,y=t.postPermalink,x=t.sendEvent,O=t.toggleDeleteCommentModal,w=t.toggleSendReplies,C=t.trackClick,j=Object(rt.a)(f),I=!!r&&r.displayText===n.author,S=!!r&&r.isEmployee,k=b||g?j&&c:c,P=Object(mt.a)(n);return Tt("div",{className:o},void 0,Tt(zt,{},void 0,k&&Tt(Wt,{onClick:function(){s(),et()(function(){return C("reply")()})},disabled:a},void 0,Tt(_t,{}),Object(v.a)(l,"comment.reply")),Tt(gt.a,{dropdownId:n.id+"-comment-share-menu",isOverlay:!!d,permalink:Object(tt.a)(y,n.id),sendEventWithName:this.sendCommentEventWithName},void 0,Tt(Wt,{onClick:function(){return e.sendCommentEventWithName("share")}},void 0,Object(v.a)(l,"posts.share"))),!I&&c&&Tt(Wt,{onClick:this.handleReportClick,disabled:a},void 0,Object(v.a)(l,"comment.report")),Tt(Wt,{onClick:this.handleSave},void 0,n.isSaved?Object(v.a)(l,"comment.unsaveComment"):Object(v.a)(l,"comment.saveComment")),r&&!I&&Tt(Wt,{onClick:function(){return t=e.props.comment,n=e.props.sendEvent,o="\n    "+Xe.a.redditUrl+"/gold/payment?goldtype=gift&months=1&thing="+t.id+"&web2x=true\n  ",window.open(o,"_blank"),void n(Object(wt.a)("gild",t.id));var t,n,o}},void 0,Object(v.a)(l,"comment.gold")),I&&Tt(Wt,{onClick:this.handleEdit},void 0,Object(v.a)(l,"comment.edit")),I&&Tt(Ft,{modModeEnabled:h},void 0,Tt(ft.b,{dropdownId:Jt(n.id),onClick:function(){return x(Object(wt.a)("comment_overflow_menu",n.id))}},void 0,Tt(Ht,{displayText:Object(v.a)(l,"comment.deleteComment"),onClick:this.handleDelete},void 0,Tt(Rt,{})),Tt(xt.a,{text:Object(v.a)(l,"posts.toggleSendReplies"),onClick:w,isSelected:this.props.sendRepliesToggled}))),this.props.isConfirmModalOpen&&Tt(lt.a,{actionText:Object(v.a)(l,"comment.delete"),cancelActionText:Object(v.a)(l,"comment.keep"),headerText:Object(v.a)(l,"comment.deleteComment"),modalText:Object(v.a)(l,"comment.deleteConfirmation"),onConfirm:i,toggleModal:O,trackClick:function(){},withOverlay:!0}),j&&(h?Tt(Kt,{comment:n,isCommentAuthor:I,language:l}):Tt(Dt,{dropdownId:n.id+"-mod-actions-menu",inCommentFlatlist:!0,onClick:function(){return x(Object(wt.a)("comment_mod_action_menu",n.id))}},void 0,Tt(Mt,{}),Tt(ct.a,{comment:n,isOverlay:!!d,language:l,tooltipId:n.id+"-mod-actions-menu"}))),Object(mt.c)(n)&&!h&&Tt(at.b,{text:""+P,onClick:function(){m(),e.sendCommentModEventWithName("comment_report_menu")},selected:this.props.activeTooltipId===Qt(n.id),id:Qt(n.id)},void 0,Tt(Ut,{isOverlay:!!d,language:l,model:n,onIgnoreReports:function(){u(),e.sendCommentReportEvent(n.ignoreReports?"restore_reports":"ignore_reports")},tooltipId:Qt(n.id)}),n.ignoreReports?Tt(At,{}):Tt(Nt,{})),j&&!h&&I&&!S&&!n.bannedBy&&Tt(at.b,{onClick:this.handleDistinguishToggle,selected:this.props.activeTooltipId===Gt(n.id)},void 0,Tt(at.a,{}),Tt(pt.a,{isAdminDistinguished:n.isAdmin,isDropdownOpen:this.props.activeTooltipId===Gt(n.id),isModDistinguished:n.isMod,isOverlay:!!d,isStickied:n.isStickied,isTopLevelComment:!n.parentId,isUserEmployee:S,isUserMod:j,language:l,onDistinguishComment:p,sendEventWithName:this.sendCommentDistinguishEvent,tooltipId:Gt(n.id)})),I&&S&&!n.bannedBy&&Tt(at.b,{onClick:this.handleDistinguishToggle,selected:this.props.activeTooltipId===Gt(n.id)},void 0,Tt(at.a,{}),Tt(pt.a,{isAdminDistinguished:n.isAdmin,isDropdownOpen:this.props.activeTooltipId===Gt(n.id),isModDistinguished:n.isMod,isOverlay:!!d,isStickied:n.isStickied,isTopLevelComment:!n.parentId,isUserEmployee:S,isUserMod:j,language:l,onDistinguishComment:p,sendEventWithName:this.sendCommentDistinguishEvent,tooltipId:Gt(n.id)}))),this.props.reportFlowIsOpen&&Tt(ht.a,{withOverlay:!0,commentId:this.props.comment.id,overlayCustomStyles:ht.b,postId:this.props.comment.postId}))}}]),t}(),en=$t(Xt(Object(bt.b)(Object(yt.b)(Zt)))),tn=n("./src/reddit/components/Comments/Comment/TopMeta/index.tsx"),nn=n("./src/reddit/components/ModModeReports/index.tsx"),on=n("./src/reddit/components/RawHTMLDisplay/index.tsx"),rn=n("./src/reddit/components/RichTextJson/index.tsx"),sn=n("./src/reddit/components/VerticalVotes/index.tsx"),dn=n("./src/reddit/components/VerticalVotes/index.m.less"),cn=n.n(dn),an=n("./src/reddit/components/VerticalVotes/votes.tsx"),ln=n("./src/reddit/components/VerticalVotes/votes.m.less"),pn=n.n(ln),un=n("./src/reddit/constants/componentTestIds.ts"),mn=n("./src/reddit/controls/ErrorText/index.tsx"),fn=n("./src/reddit/controls/InvisibleScreenReaderText/index.tsx"),hn=n("./src/reddit/models/Subreddit/index.ts"),gn=n("./src/reddit/models/Vote/index.ts"),bn=n("./src/reddit/reducers/comments/visitHighlightingFilter/index.ts"),vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yn=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),xn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,d=e[Symbol.iterator]();!(o=(s=d.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&d.return&&d.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),On=g()(Ye).withConfig({componentId:"s16de0yo-0"})(["left: 15px;position: absolute;top: 17px;"]),wn=g()(mn.a).withConfig({componentId:"s16de0yo-1"})(["text-align: left;"]),Cn=g()(sn.a).withConfig({componentId:"s16de0yo-2"})(["min-width: 24px;max-height: 40px;margin: 6px -1px -2px 9px;text-align: center;z-index: ",";","."," {height: 20px;}.",",.",",",","," {padding: 2px;}"],$e.d,sn.b,cn.a.voteButton,pn.a.customDownvote,pn.a.customUpvote,an.c,an.d),jn=g()(tn.a).withConfig({componentId:"s16de0yo-3"})(["margin-left: ",";min-height: 18px;"],function(e){return e.collapsed?"32px":"0px"}),In=g()(Object(Ie.a)()).withConfig({componentId:"s16de0yo-4"})(["border: 1px solid transparent;border-radius: 4px;box-sizing: border-box;opacity: ",";margin-left: 4px;padding-left: 4px;padding-top: 4px;max-width: ","px;width: 100%;","","","",""],function(e){return e.isPendingDeletion?"0.5":"1.0"},re.e,function(e){return e.isRemoved?"border: 2px solid "+oe.a.removed+";\n      background-color: "+Object(l.e)(oe.a.removed,.05)+";\n      padding-left: 4px;\n      padding-top: 4px;\n      margin-top: -4px;":""},function(e){return e.isActive?"border: 1px solid "+Object(ge.c)(e).postIcon+";":""},function(e){return e.isCollapsed?"margin-left: 8px;\n      padding-left: 0;":""},function(e){return e.highlightComment?"background-color: "+Object(l.j)(.9,Object(ge.c)(e).active):""}),Sn=g()(Object(Ie.a)()).withConfig({componentId:"s16de0yo-5"})(["border-radius: 4px;display: flex;margin-left: -23px;padding: 8px 4px 0 0;position: relative;transition: color 0.5s, fill 0.5s, background 1s;",":hover + "," {"," {opacity: 1;}}","&.top-level {margin-top: 16px;}"],On,In,jn,function(e){return e.focused?"background: "+Object(l.j)(.95,Object(ge.c)(e).button)+";":"background: transparent;"}),kn=g()(rn.a).withConfig({componentId:"s16de0yo-6"})(["padding: 2px 0;width: 100%;"]),Pn=g.a.div.withConfig({componentId:"s16de0yo-7"})(["padding: 2px 0;width: 100%"]),Tn=g()(_e).withConfig({componentId:"s16de0yo-8"})(["position: relative;&:before {border-left: 1px dashed ",';bottom: 0;content: " ";left: -8px;position: absolute;top: 1px;}'],function(e){return Object(ge.c)(e).line}),En=g()(Tn).withConfig({componentId:"s16de0yo-9"})(["margin-left: 0;&:before {content: none;}"]),_n=Object(z.q)()(Object(m.connect)(function(){return Object(f.createStructuredSelector)({comment:function(e,t){return Object(be.m)(e,t)},depth:function(e,t){return Object(be.i)(e,t)},collapsed:be.g,flair:be.e,focused:be.s,isEditing:be.x,isPendingDeletion:be.y,language:K.z,moderatorPermissions:function(e,t){var n=Object(be.m)(e,t);return n?Object(dt.f)(e,{subredditId:n.subredditId}):null},modModeEnabled:z.H,errorMsgs:be.B,replyFormOpen:be.E,subredditType:be.G,highlightComment:function(e,t){var n=t.commentId,o=Object(be.p)(e);if(o===bn.a.None)return!1;var r=Object(be.m)(e,{commentId:n});if(!r)return!1;var i=Object(K.k)(e),s=!!Object(dt.e)(e,{postId:r.postId}),d=Object(ye.x)(e,{postId:r.postId});if(!d||!d.previousVisits||d.previousVisits.length<2)return!1;var c=o===bn.a.Last?d.previousVisits[d.previousVisits.length-1]:d.previousVisits[0];return(s||i)&&r.created>c}})},function(e,t){var n=t.commentId,o=t.commentsPageKey,r=t.scrollToAndRemeasure,i=t.trackClick;return{onCollapseClick:function(){return e(Object(A.Ia)({commentId:n,commentsPageKey:o,scrollToAndRemeasure:r}))},onIgnoreReports:function(){return e(Object(A.Ka)(n))},onVoteClick:function(t){var o=t===gn.a.upvoted?[Object(A.La)(n),"upvote_comment"]:[Object(A.Q)(n),"downvote_comment"],r=xn(o,2),s=r[0],d=r[1];i(d)(),e(s)}}})(function(e){var t=e.childrenInfo,n=e.clearHovered,o=e.comment,r=e.commentsPageKey,i=e.collapsed,s=e.depth,d=e.errorMsgs,c=e.flair,a=e.focused,l=e.highlightComment,p=e.isActive,u=e.isEditing,m=e.isPendingDeletion,f=e.language,h=e.moderatorPermissions,g=e.modModeEnabled,y=e.onCollapseClick,x=e.onIgnoreReports,O=e.onLineMouseOver,w=e.onVoteClick,C=e.replyFormOpen,j=e.trackClick,I=e.renderedInOverlay,S=e.subredditType,k=!u&&!o.isDeleted&&!!d&&d.length>0,P=Object(M.a)(b.a.edit,o.id),T=Object(M.a)(b.a.replyToComment,o.id),E=Object(rt.a)(h),_=o.authorIsContractor&&S===hn.a.EmployeesOnly;return yn(Sn,{className:"Comment "+o.id+" "+(s?"":"top-level"),focused:a},void 0,i&&yn(On,{className:o.id,onClick:function(){n(),y(),j("collapse")()},onMouseOver:function(){return O(o.id)},onMouseOut:n}),!i&&!o.isDeleted&&yn(Cn,{compact:!0,model:o,onVoteClick:w}),yn(In,{highlightComment:l,isActive:p,isCollapsed:i,isPendingDeletion:m,isRemoved:!!o.bannedBy},void 0,yn(fn.a,{},void 0,Object(v.a)(f,"comment.level",{level:s+1})),yn(jn,{childrenInfo:t,collapsed:i,comment:o,commentsPageKey:r,flair:c,language:f,renderedInOverlay:I,renderContractorBadge:_}),!i&&yn("div",{},void 0,u&&yn(En,{autofocus:!0,commentsPageKey:r,depth:s,draftType:b.a.edit,draftKey:P,rtJson:o.media&&o.media.richtextContent,isTopLevelComment:!1,parentCommentId:o.id,submitAction:function(e,t){return Object(A.Z)({language:f,id:o.id,commentsPageKey:r,depth:s,draftKey:P,formData:e})},submitButtonText:Object(v.a)(f,"comment.saveEdits")}),!u&&!o.isDeleted&&(o.media&&o.media.richtextContent?yn(kn,{content:o.media.richtextContent,language:f,renderingObjectInfo:o,renderFallback:function(){return yn(Pn,{"data-test-id":un.d},void 0,yn(on.a,{html:o.body}))}}):yn(Pn,{"data-test-id":un.d},void 0,yn(on.a,{html:o.body}))),g&&E&&Object(mt.c)(o)&&yn(nn.a,{language:f,onIgnoreReports:x,reportable:o}),!u&&!o.isDeleted&&yn(en,{comment:o,commentsPageKey:r,language:f,trackClick:j}),k&&d.map(function(e){return yn(wn,{language:f},void 0,e)}),C&&yn(Tn,{autofocus:!0,commentsPageKey:r,depth:s,draftType:b.a.replyToComment,draftKey:T,isTopLevelComment:!1,parentCommentId:o.id,submitAction:function(e,t){return Object(A.Ea)({commentsPageKey:r,draftKey:T,language:f,parentCommentDepth:s,parentCommentId:o.id,formData:e,editorMode:t})},submitButtonText:Object(v.a)(f,"comment.reply")}))))})),Rn=function(e){return yn(ae.a.Consumer,{},void 0,function(t){return u.a.createElement(_n,vn({},e,{trackClick:t}))})},Mn=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Ln=g.a.div.withConfig({componentId:"wndnar-0"})(["align-items: center;border: 1px solid transparent;border-radius: 4px;color: ",";display: flex;fill: ",";margin-left: 8px;padding: 4px;",""],function(e){return Object(ge.c)(e).linkText},function(e){return Object(ge.c)(e).linkText},function(e){return e.isActive?"border: 1px solid "+Object(ge.c)(e).postIcon+";":""}),Nn=g()(I.a).withConfig({componentId:"wndnar-1"})(["height: 10px;margin-top: -0.125em; // Taken from https://blog.prototypr.io/align-svg-icons-to-text-and-say-goodbye-to-font-icons-d44b3d7b26b4\nwidth: 10px;"]),An=g()(C).withConfig({componentId:"wndnar-2"})(["","align-items: center;display: flex;"],Ne.actionFont),Dn=g.a.span.withConfig({componentId:"wndnar-3"})(["&:hover {text-decoration: underline;}"]),Fn=Object(f.createStructuredSelector)({language:K.z,permalink:function(e,t){return Object(be.l)(e,{commentId:Object(be.r)(e,t).parentId})}}),Hn=Object(m.connect)(Fn)(Object(yt.b)(function(e){var t=e.isActive,n=e.isOverlay,o=e.language,r=e.permalink;return Mn(Ln,{isActive:t},void 0,Mn(An,{isOverlay:!!n,to:Object(j.b)(r)},void 0,Mn(Dn,{},void 0,Object(v.a)(o,"comment.continueThread"))," ",Mn(Nn,{})))})),zn=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Bn=g.a.div.withConfig({componentId:"s1m7ii1-0"})(["padding: 8px 0px 0px;"]),qn=g.a.p.withConfig({componentId:"s1m7ii1-1"})(["","border: 1px solid transparent;border-radius: 4px;color: ",";cursor: pointer;height: 24px;margin-left: 4px;padding-left: 4px;"],Ne.actionFont,function(e){return Object(ge.c)(e).linkText}),Wn=g()(qn).withConfig({componentId:"s1m7ii1-2"})(["&:hover {text-decoration: underline;}",""],function(e){return e.isActive?"border: 1px solid "+Object(ge.c)(e).postIcon+";":""}),Kn=Object(f.createStructuredSelector)({moreCommentsItem:be.z,moreCommentsPending:be.A,language:K.z}),Un=Object(m.connect)(Kn,function(e,t){return{moreCommentsClicked:function(){return e(Object(A.U)(t.commentsPageKey,t.moreCommentsId))}}})(function(e){var t=e.language,n=e.isActive,o=e.moreCommentsClicked,r=e.moreCommentsItem,i=e.moreCommentsPending;return zn(Bn,{},void 0,i?zn(qn,{},void 0,Object(v.a)(t,"comment.loading")):zn(ae.a.Consumer,{},void 0,function(e){return zn(Wn,{isActive:n,onClick:function(){o(),e("load_more_comment")()}},void 0,Object(v.b)(t,"comment.moreReply",r.numComments,{numComments:r.numComments}))}))}),$n=n("./node_modules/lodash/times.js"),Vn=n.n($n),Gn=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Jn=g()(function(e){return u.a.createElement("div",e,Gn("i",{className:"threadline"}))}).withConfig({componentId:"fxv3b9-0"})(["box-sizing: border-box;cursor: pointer;display: inline-block;height: 100%;margin-left: ","px;vertical-align: top;width: ","px;& > ."," {display: block;height: 100%;width: 50%;border-right: 2px solid ",";}&."," > ."," {border-right: 2px solid ",";}"],re.C,re.D,Ue.h,function(e){return Object(ge.c)(e).line},Ue.f,Ue.h,function(e){return Object(ge.c)(e).button}),Qn=g.a.div.withConfig({componentId:"fxv3b9-1"})(["bottom: 0;left: 0;position: absolute;top: 0;z-index: ",";"],$e.f),Yn=g.a.div.withConfig({componentId:"fxv3b9-2"})(["box-sizing: border-box;display: inline-block;height: 100%;vertical-align: top;"," {bottom: 0;height: calc(100% - 56px);position: absolute;}"],Jn),Xn=function(e){var t=e.collapsed,n=e.depth,o=e.onLineClick,r=e.onLineMouseOver,i=e.onLineMouseOut,s=e.onShortLineClick,d=e.parentNodeIds,c=e.type;return Gn(Qn,{},void 0,Vn()(n+1,function(e){return e===n?c!==Ke.b.Comment||t?null:Gn(Yn,{},d[e],Gn(Jn,{className:d[e],onClick:s,onMouseOver:function(){return r(d[e])},onMouseOut:function(){return i(d[e])}})):Gn(Jn,{className:d[e],onClick:o(e),onMouseOver:function(){return r(d[e])},onMouseOut:function(){return i(d[e])}},d[e])}))},Zn=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),eo=g()(Object(Ie.b)()).withConfig({componentId:"s136il31-0"})(["box-sizing: border-box;overflow: visible;padding-left: ","px;position: relative;transition: background 1s;width: 100%;","&:focus{outline: none;}"],function(e){return e.depth*(re.D+re.C)+(e.type===Ke.b.Comment?re.D:0)},function(e){return e.isHidden?"display: none;":""}),to=function(e){var t=document.querySelectorAll("."+e);if(t&&t.length)for(var n=0;n<t.length;n++)t[n].classList.add(Ue.f)},no=function(){var e=document.querySelectorAll("."+Ue.f);if(e&&e.length)for(var t=0;t<e.length;t++)e[t].classList.remove(Ue.f)},oo=Object(m.connect)(function(){return Object(f.createStructuredSelector)({collapsed:function(e,t){var n=t.commentLink,o=t.commentsPageKey;return!(!e.comments.collapsed[o]||!e.comments.collapsed[o][n.id])},commentListNode:function(e,t){return Object(be.k)(e,t)},depth:function(e,t){return Object(be.i)(e,t)},isActive:function(e,t){var n=t.commentLink;return!!e.shortcuts.activeCommentId&&n.id===e.shortcuts.activeCommentId}})},function(e,t){var n=t.commentLink,o=t.commentsPageKey,r=t.scrollToAndRemeasure;return{onLineClick:function(t){return function(){e(Object(A.J)({commentLink:n,commentsPageKey:o,lineDepth:t,scrollToAndRemeasure:r}))}},onShortLineClick:function(){return e(Object(A.Ia)({commentId:n.id,commentsPageKey:o,scrollToAndRemeasure:r}))}}})(function(e){var t=e.childrenInfo,n=e.className,o=e.collapsed,r=e.commentLink,i=e.commentsPageKey,s=e.depth,d=e.isActive,c=e.isHidden,a=e.onLineClick,l=e.onShortLineClick,p=e.scrollToAndRemeasure,u=e.renderedInOverlay,m=e.parentNodeIds;return Zn(eo,{className:n,depth:s,isHidden:c,id:r.id,isActive:d,type:r.type},void 0,Zn(Xn,{collapsed:o,depth:s,onLineClick:a,onLineMouseOver:to,onLineMouseOut:no,onShortLineClick:l,type:r.type,parentNodeIds:m}),ro({childrenInfo:t,clearHovered:no,commentLink:r,commentsPageKey:i,onLineMouseOver:to,isActive:d,renderedInOverlay:u,scrollToAndRemeasure:p}))}),ro=function(e){var t=e.childrenInfo,n=e.clearHovered,o=e.commentLink,r=e.commentsPageKey,i=e.isActive,s=e.onLineMouseOver,d=e.renderedInOverlay,c=e.scrollToAndRemeasure;switch(o.type){case Ke.b.Comment:return Zn(Rn,{childrenInfo:t,clearHovered:n,commentId:o.id,commentsPageKey:r,isActive:i,onLineMouseOver:s,renderedInOverlay:d,scrollToAndRemeasure:c});case Ke.b.MoreComments:return Zn(Un,{commentsPageKey:r,isActive:i,moreCommentsId:o.id});case Ke.b.ContinueThread:return Zn(Hn,{id:o.id,isActive:i})}},io=n("./src/reddit/components/Comments/helpers/hiddenComments.ts"),so=n("./src/reddit/components/Comments/States/index.tsx"),co=n("./src/reddit/components/Scroller/Simple.tsx"),ao=n("./src/reddit/constants/screenWidths.ts"),lo=n("./src/reddit/helpers/commentList/index.ts"),po=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),uo=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var mo=re.h+10,fo=g()(co.b).withConfig({componentId:"s10usnt7-0"})(["padding: 0 15px;@media(min-width: ","px) {padding: 0;}"],ao.h),ho=Object(f.createStructuredSelector)({allCollapsed:be.a,commentLinks:be.j,commentThreadLinkSet:be.o,language:K.z,measureScrollFPS:B.d.measureScrollFPS,moreComments:be.b,postPermalink:ye.w}),go=Object(m.connect)(ho)(function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getParentNodeIds=function(e){var t=n.props,o=t.commentLinks,r=t.commentThreadLinkSet;if(n.parentNodeIdsMap[e.id])return n.parentNodeIdsMap[e.id];var i=r[e.id].depth;if(0===i)return n.parentNodeIdsMap[e.id]=[e.id],n.parentNodeIdsMap[e.id];var s=o[o.findIndex(function(t){return t.id===e.id})-1],d=n.parentNodeIdsMap[s.id].slice();return n.parentNodeIdsMap[e.id]=d.filter(function(e){return r[e].depth<i}),n.parentNodeIdsMap[e.id].push(e.id),n.parentNodeIdsMap[e.id]},n.getChildrenInfo=function(e){return n.childrenInfoMap[e]||void 0},n.parentNodeIdsMap={},io.c(),n.childrenInfoMap={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),uo(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.commentLinks,n=e.allCollapsed,o=e.commentThreadLinkSet,r=e.moreComments;this.timerId&&S.c.cancel(this.timerId),t.length&&(this.timerId=S.c.start()),this.findHiddenNodes(t,n,o,r)}},{key:"componentDidMount",value:function(){this.timerId&&Object(S.b)(P.n.Redesign,{type:"mount",component:"commentsList",duration:S.c.end(this.timerId)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.allCollapsed,n=e.commentsPageKey,o=e.commentLinks,r=e.commentThreadLinkSet,i=e.moreComments;(n!==this.props.commentsPageKey||o.length>this.props.commentLinks.length||!We()(t,this.props.allCollapsed))&&this.findHiddenNodes(o,t,r,i)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.commentsPageKey,o=t.commentLinks,r=t.allCollapsed;return e.commentsPageKey!==n||e.commentLinks.length>o.length||!We()(e.allCollapsed,r)||e.commentLinks.some(function(e,t){return e.id!==o[t].id})}},{key:"componentWillUpdate",value:function(e){this.timerId&&S.c.cancel(this.timerId),e.commentLinks.length&&(this.timerId=S.c.start())}},{key:"componentDidUpdate",value:function(e){this.timerId&&Object(S.b)(P.n.Redesign,{type:"mount",component:"commentsList",duration:S.c.end(this.timerId)})}},{key:"componentWillUnmount",value:function(){this.timerId&&S.c.cancel(this.timerId)}},{key:"findHiddenNodes",value:function(e,t,n,o){if(t&&Object.keys(t).length){var r=null,i=1/0,s=0,d=!1;io.c();for(var c=0;c<e.length;c++){var a=e[c];r&&(n[a.id].depth>i?(io.a(a.id),s+=Object(lo.d)(a,o),a.type===Ke.b.ContinueThread&&(d=!0)):(this.childrenInfoMap[r]={numChildren:s,hasContinueThread:d},r=null,i=1/0,s=0,d=!1)),!r&&t[a.id]&&(r=a.id,i=n[a.id].depth)}}}},{key:"render",value:function(){return this.props.commentLinks.length?this.renderList():this.renderEmptyState()}},{key:"renderList",value:function(){var e=this,t=void 0;this.props.measureScrollFPS&&(t="comments-"+(this.props.renderedInOverlay?"lightbox":"page"));return po(fo,{className:this.props.className,disableScrollCache:this.props.renderedInOverlay,getContainer:function(){return e.props.renderedInOverlay?document.getElementById(ie.c):null},preventScrollOnMount:!0,scrollToChildPadding:mo,trackingName:t},this.props.commentsPageKey,this.props.commentLinks.map(function(t,n){return{estHeight:io.b(t.id)?0:65,id:t.id,render:function(n){var o=n.placeholderRecommended,r=n.height,i=(n.width,n.scrollToAndRemeasure);return o?po("div",{style:{height:r,backgroundColor:"#fff"}}):po(oo,{childrenInfo:e.getChildrenInfo(t.id),commentLink:t,commentsPageKey:e.props.commentsPageKey,id:t.id,isHidden:io.b(t.id),scrollToAndRemeasure:i,renderedInOverlay:!!e.props.renderedInOverlay,parentNodeIds:e.getParentNodeIds(t)})}}}))}},{key:"renderEmptyState",value:function(){return this.props.commentId?po(so.f,{language:this.props.language,link:this.props.postPermalink}):po(so.b,{language:this.props.language})}}]),t}()),bo=n("./src/higherOrderComponents/asTooltip.tsx"),vo=n("./src/reddit/controls/Dropdown/index.tsx"),yo=n("./src/reddit/helpers/getOverlayContainerById/index.ts"),xo=n("./src/reddit/icons/svgs/Dropdown/index.tsx"),Oo=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),wo=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Co=void 0;var jo="CommentSort--SortPicker",Io=Object(bo.a)(vo.a),So=g.a.div.withConfig({componentId:"s18rx025-0"})(["","color: ",";cursor: pointer;"],Ne.labelsFont,function(e){return Object(ge.c)(e).linkText}),ko=g()(Ot.c).withConfig({componentId:"s18rx025-1"})(["","background-color: inherit;border: none;display: flex;margin-left: 4px;padding: 0 4px;width: auto;"],Ne.smallButtonFont),Po=g()(xo.a).withConfig({componentId:"s18rx025-2"})(["cursor: pointer;fill: ",";margin: 0px;"],function(e){return Object(ge.c)(e).button}),To=g.a.div.withConfig({componentId:"s18rx025-3"})(["","display: flex;margin-left: auto; /* Right side alignment through flexbox */"],Ne.metadataFont),Eo=g()(C).withConfig({componentId:"s18rx025-4"})(["","align-items: center;display: flex;color: ",";fill: ",";"],Ne.actionFont,function(e){return Object(ge.c)(e).button},function(e){return Object(ge.c)(e).button}),_o=g.a.span.withConfig({componentId:"s18rx025-5"})(["color: ",";@media (max-width: ","px) {display: none;}"],function(e){return Object(ge.c)(e).bodyText},ao.e-1),Ro=g.a.span.withConfig({componentId:"s18rx025-6"})(["&:hover {text-decoration: underline;}"]),Mo=g()(I.a).withConfig({componentId:"s18rx025-7"})(["height: 11px;margin-top: -0.125em; // Taken from https://blog.prototypr.io/align-svg-icons-to-text-and-say-goodbye-to-font-icons-d44b3d7b26b4\nwidth: 11px;"]),Lo=Object(f.createStructuredSelector)({commentPermalink:function(e,t){var n=t.commentId;return n&&Object(be.l)(e,{commentId:n})},dropdownIsOpen:Object(xe.b)(jo),highlightIsOpen:Object(xe.b)("CommentSort--highlight-picker"),language:K.z,postPermalink:ye.w,showCommentHighlighter:function(e,t){var n=t.postId,o=Object(K.k)(e),r=!!Object(dt.e)(e,{postId:n}),i=Object(ye.x)(e,{postId:n});return(r||o)&&!!i&&!!i.previousVisits&&i.previousVisits.length>1},selectedHighlightSort:be.p}),No=function(e){return function(e,t){return function(){return Co.props.sendEvent(function(n){return{source:"comment_highlighting",action:t,noun:e}})}}},Ao=Object(m.connect)(Lo,function(e,t){var n=t.trackClick;return{onOpenDropdown:function(){e(Object(N.e)({tooltipId:jo})),n("sorting")},onOpenHighlightDropdown:function(t){e(Object(N.e)({tooltipId:"CommentSort--highlight-picker"})),t()},changeHighlightSort:function(t){return e(Object(A.I)({sort:t}))}}})(Object(bt.b)(function(e){var t=e.sort||P.r.CONFIDENCE,n=Object(yo.a)(e.isOverlay),o=" ("+Object(v.a)(e.language,"sorts.suggested")+")",r=e.suggestedSort&&t===e.suggestedSort?P.t[t]+o:P.t[t];return u.a.createElement("div",{className:e.className,ref:e.elementRef},wo(So,{onClick:e.onOpenDropdown},void 0,Object(v.a)(e.language,"sorts.titleBy")),wo(ko,{onClick:e.onOpenDropdown,displayText:r,id:jo,noHover:!0}),wo(Po,{onClick:e.onOpenDropdown}),wo(Io,{container:n,isOpen:e.dropdownIsOpen,renderContentsHidden:!0,isOverlay:e.isOverlay,tooltipId:jo},void 0,[P.r.CONFIDENCE,P.r.TOP,P.r.NEW,P.r.CONTROVERSIAL,P.r.OLD,P.r.QA].map(function(n){var o=e.commentPermalink?e.commentPermalink:e.postPermalink,r=Object(j.b)(o);return wo(C,{isOverlay:e.isOverlay,onClick:e.trackClick(Ke.a[n]),tabIndex:-1,to:r+"?sort="+n},n,wo(Ot.c,{displayText:P.t[n],isSelected:t===n}))})),e.showCommentHighlighter&&wo(Ho,{changeHighlightSort:e.changeHighlightSort,container:n,highlightIsOpen:e.highlightIsOpen,isOverlay:e.isOverlay,language:e.language,onOpen:function(){return e.onOpenHighlightDropdown(No(e.sendEvent)("dropdown","click"))},selectedSort:e.selectedHighlightSort,trackHighlight:No(e.sendEvent)}),e.commentId&&zo(e))})),Do=function(e){return e===bn.a.First?"First Visit":e===bn.a.Last?"Last Visit":"None"},Fo=g.a.div.withConfig({componentId:"s18rx025-8"})(["align-items: center;display: flex;margin-left: 20px;"]),Ho=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.track=function(){var t=e.props,n=t.trackHighlight,o=t.selectedSort;o!==bn.a.None&&n(o===bn.a.Last?"since_last_visit":"since_first_visit","view")},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),Oo(t,[{key:"componentDidMount",value:function(){this.track()}},{key:"componentWillUpdate",value:function(e){e.selectedSort!==this.props.selectedSort&&this.track()}},{key:"render",value:function(){var e=this.props;return wo(Fo,{},void 0,wo(So,{onClick:e.onOpen},void 0,Object(v.a)(e.language,"sorts.commentVisitHighlight")),wo(ko,{onClick:e.onOpen,displayText:Do(e.selectedSort),id:"CommentSort--highlight-picker"}),wo(Po,{onClick:e.onOpen}),wo(Io,{container:e.container,isOpen:e.highlightIsOpen,renderContentsHidden:!0,isOverlay:e.isOverlay,tooltipId:"CommentSort--highlight-picker"},void 0,wo("span",{onClick:function(){e.trackHighlight("since_first_visit","click"),e.changeHighlightSort(bn.a.First)}},void 0,wo(Ot.c,{displayText:Do(bn.a.First),isSelected:e.selectedSort===bn.a.First})),wo("span",{onClick:function(){e.trackHighlight("since_last_visit","click"),e.changeHighlightSort(bn.a.Last)}},void 0,wo(Ot.c,{displayText:Do(bn.a.Last),isSelected:e.selectedSort===bn.a.Last})),wo("span",{onClick:function(){e.trackHighlight("do_not_highlight","click"),e.changeHighlightSort(bn.a.None)}},void 0,wo(Ot.c,{displayText:Do(bn.a.None),isSelected:e.selectedSort===bn.a.None}))))}}]),t}(),zo=function(e){return wo(To,{},void 0,wo(_o,{},void 0,Object(v.a)(e.language,"comment.singleComment.shortMessage")," "),wo(Eo,{isOverlay:e.isOverlay,to:Object(j.b)(e.postPermalink)},void 0,wo(Ro,{},void 0,Object(v.a)(e.language,"comment.viewAllComments"))," ",wo(Mo,{})))},Bo=g()(Ao).withConfig({componentId:"s18rx025-9"})(["align-items: center;background: ",";border-bottom: 1px solid ",";display: flex;justify-content: flex-start;margin: 16px 40px 0;padding: 0 16px 4px 0;"],function(e){return Object(ge.c)(e).body},function(e){return Object(ge.c)(e).line}),qo=n("./src/lib/objectSelector/index.ts"),Wo=n("./src/reddit/components/IdCard/index.tsx"),Ko=n("./src/reddit/components/ProfileIdCard/index.tsx"),Uo=n("./src/reddit/components/SidebarAd/index.tsx"),$o=n("./src/reddit/components/SidebarFooter/index.tsx"),Vo=n("./src/reddit/components/SidebarSpacer/index.tsx"),Go=n("./src/reddit/components/SidebarStickyBottom/index.tsx"),Jo=n("./src/reddit/components/Widgets/Widget/index.tsx"),Qo=n("./src/reddit/helpers/createBannerProperties/index.ts"),Yo=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),Xo=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Zo=[P.f,P.g],er=g.a.div.withConfig({componentId:"s1mplfi9-0"})(["display: flex;flex-direction: column;height: 100%;top: 0;width: ","px;"],re.z),tr=Object(f.createStructuredSelector)({language:K.z,widgets:Object(qo.a)(W.i)}),nr=Object(m.connect)(tr)(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),Xo(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.subredditName!==e.subredditName||!We()(this.props.widgets,e.widgets)}},{key:"renderFooter",value:function(e){var t=this.props,n=t.isOverlay,o=t.subredditName,r=t.post;return n?Yo(u.a.Fragment,{},void 0,Yo(Uo.a,{placement:P.d.BELOW_THE_FOLD,listingName:o,isOverlay:n,placementIndex:e,position:Qo.a.BOTTOM}),Yo($o.a,{})):Yo(Go.f,{listingName:o,things:[r],placementIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.commentsPageKey,o=e.isOverlay,r=e.post,i=e.subredditName,s=e.widgets,d=0;return Yo(er,{className:t},void 0,"profile"===r.belongsTo.type?Yo(Ko.a,{profileName:i,isOverlay:o||!1}):Yo(Wo.b,{commentsPageKey:n,isCommentsPage:!0,isOverlay:o,listingName:i,postId:r.id,rememberPosition:r.numComments>0}),Yo(Uo.a,{placement:P.d.ABOVE_THE_FOLD,placementIndex:d++,listingName:i,isPostNSFW:r.isNSFW,isOverlay:o,refreshKey:r.id,position:Qo.a.FIRST,sizes:Zo}),s.map(function(e,t){return Yo(Vo.a,{},"widgetSpacer"+t,Yo(Jo.a,{subredditName:i,widget:e}))}),this.renderFooter(d++))}}]),t}()),or=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),rr=Object(h.css)(["","color: ",";"],Ne.metadataFont,function(e){return Object(ge.c)(e).bodyText}),ir=g.a.div.withConfig({componentId:"s15t8fxx-0"})(["display: inline-block;margin: 12px 8px 8px 16px;"]),sr=g()(Object(Ie.a)()).withConfig({componentId:"s15t8fxx-1"})(["background-color: ",";display: inline-block;width: 8px;position: absolute;top: 0;bottom: 0;"],function(e){return e.color}),dr=g.a.div.withConfig({componentId:"s15t8fxx-2"})(["",""],rr),cr=g.a.div.withConfig({componentId:"s15t8fxx-3"})(["display: inline-block;margin: 8px 0 8px;"]),ar=g.a.div.withConfig({componentId:"s15t8fxx-4"})(["","font-weight: bold;"],rr),lr=g()(Object(Ie.a)()).withConfig({componentId:"s15t8fxx-5"})(["background-color: ",";border: 1px solid ",";border-radius: 4px;margin: 16px;position: relative;display: flex;"],function(e){return Object(ge.c)(e).body},function(e){return e.color}),pr=function(e){var t=e.className,n=e.color,o=e.renderIcon,r=e.subtitle,i=e.title;return or(lr,{className:t,color:n},void 0,or(sr,{color:n}),o&&or(ir,{},void 0,o()),or(cr,{},void 0,or(ar,{},void 0,i),r&&or(dr,{},void 0,r)))},ur=n("./src/reddit/components/HeaderImage/index.tsx"),mr=n("./src/reddit/components/PostContent/index.tsx"),fr=n("./src/reddit/components/PostTopMeta/index.tsx"),hr=n("./src/reddit/components/SubredditNav/index.tsx"),gr=n("./src/reddit/helpers/history/index.ts"),br=n("./src/reddit/helpers/trackers/screenview.ts"),vr=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),yr=g.a.div.withConfig({componentId:"s1qr0gd6-0"})(["box-sizing: border-box;display: flex;justify-content: center;margin: ","px auto 0;max-width: ","px;overflow-y: hidden;padding-bottom: 32px;position: relative;width: calc(100% - ","px);&:focus {outline: none;}"],re.h,re.l,2*re.j),xr=g.a.div.withConfig({componentId:"s1qr0gd6-1"})(["background: ",";flex: 1;margin: ","px;margin-right: ","px;max-width: 100%;min-height: 100vh;min-width: 0;padding-bottom: 1px;width: 100%;word-break: break-word;","@media(min-width: ","px) {max-width: 890px;}"],function(e){return Object(ge.c)(e).body},re.n,re.m,"",ao.f),Or=g.a.div.withConfig({componentId:"s1qr0gd6-2"})(["display: none;margin: ","px;margin-left: 0;padding: 0;right: 0;top: 0;width: ","px;@media(min-width: ","px) {display: block;}"],re.n,re.z,ao.f),wr=function(e){return vr(yr,{tabIndex:-1},void 0,vr(xr,{redditStyle:!0},void 0,e.content),vr(Or,{},void 0,e.sidebar))},Cr=n("./src/reddit/layout/page/Listing/index.tsx"),jr=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Ir=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var d in i)void 0===n[d]&&(n[d]=i[d]);else n||(n=i||{});if(1===s)n.children=r;else if(s>1){for(var c=Array(s),a=0;a<s;a++)c[a]=arguments[a+3];n.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}();var Sr=g.a.span.withConfig({componentId:"s1gr9bvy-0"})(["&:hover {text-decoration: underline;}"]),kr=g()(I.a).withConfig({componentId:"s1gr9bvy-1"})(["height: 11px;margin-top: -0.125em;width: 11px;transform: scaleX(-1);"]),Pr=g.a.div.withConfig({componentId:"s1gr9bvy-2"})(["padding: 8px;"]),Tr=g()(C).withConfig({componentId:"s1gr9bvy-3"})(["color: ",";fill: ",";font-size: 11px;font-weight: 500;line-height: 16px;"],function(e){return Object(ge.c)(e).linkText},function(e){return Object(ge.c)(e).linkText}),Er=80,_r=g()(le.a).withConfig({componentId:"s1gr9bvy-4"})(["color: ",";height: 24px;margin: 0 -4px 0 4px;vertical-align: sub;width: 24px;"],oe.a.locked),Rr=g()(function(e){return pe("svg",{className:e.className,id:e.id,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,pe("path",{d:"M16,9H15V7A5,5,0,0,0,5,7V9H4a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1H16a1,1,0,0,0,1-1V10A1,1,0,0,0,16,9ZM7,7a3,3,0,0,1,6,0V9H7Z"}))}).withConfig({componentId:"s1gr9bvy-5"})(["fill: ",";height: 24px;width: 24px;"],oe.a.locked),Mr=Object(m.connect)(function(){return Object(f.createStructuredSelector)({apiError:be.c,apiPending:be.d,canCommentAsModerator:function(e,t){var n=t.postId,o=Object(ye.H)(e,{postId:n});return!!(o&&o.id&&e.moderatingSubreddits[o.id])},comment:be.m,contentGateInfo:function(e,t){var n=t.subredditName;return Object(K.d)(e,n)},currentUserShowNSFW:K.D,fullyLoaded:be.t,headComment:be.w,isLoggedIn:K.u,isTooltipOpen:function(e,t){return!!Object(xe.a)(e)},language:K.z,origin:ve.b,post:be.C,subredditOrProfile:ye.H,userHovercardIsOpen:function(e,t){return Object(xe.b)(Object(Oe.b)({itemId:t.postId,tooltipType:fr.c.StickyPost}))(e)},userPrefs:K.P})},function(e,t){return{setCommentFocus:function(t){return e(A.K({commentListNodeId:t}))},dispatchUnpause:function(){return e(F.N({postId:t.postId}))},onHideTooltip:function(){return e(Object(N.f)())},onToggleTooltip:function(t){return e(Object(N.e)({tooltipId:t}))},openLoginModal:function(){return e(Object(D.a)())},openRegisterModal:function(){return e(Object(D.b)())}}}),Lr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.needsUpdatedMeasurements=!0,n.scrollY=null,n.recheckScrollTimer=-1,n.postPaused=!0,n.setPostScrollItemRef=function(e){n.postScrollItemRef=e,setTimeout(n.handleScroll)},n.handleScroll=a()(function(){if(n.scrollContainerEl){n.needsUpdatedMeasurements&&n.updateMeasurements();var e=n.didScrollPastPost,t=n.scrollContainerEl,o=n.scrollPostThreshold,r=n.props,i=r.userHovercardIsOpen,s=r.isOverlay,d=r.isTooltipOpen,c=r.onHideTooltip,a=r.onToggleTooltip,l=r.post,p=r.postId;clearTimeout(n.recheckScrollTimer),n.recheckScrollTimer=-1;var u=t===window?t.scrollY:t?t.scrollTop:0,m=null!==n.scrollY&&Math.abs(u-n.scrollY)>Er,f=l&&l.media&&l.media.type===me.l.EMBED?l.media.provider:null,h=l&&l.media&&me.c.has(l.media.type)&&(!f||!me.o.has(f));n.scrollY=u,!e&&u>=o&&(n.didScrollPastPost=!0),e&&u<o&&(n.didScrollPastPost=!1,i&&_.a.write(function(){a(Object(Oe.b)({itemId:p,tooltipType:fr.c.StickyPost}))})),h&&n.postScrollItemRef&&(n.postPaused||!m&&!n.didScrollPastPost?n.postPaused&&!n.didScrollPastPost&&(m?n.recheckScrollTimer=setTimeout(n.handleScroll,4*P.E):(n.postPaused=!1,_.a.write(n.postScrollItemRef.focusContent))):(n.postPaused=!0,_.a.write(n.postScrollItemRef.pauseContent))),s&&d&&c()}},P.E),n.sendEventWithName=function(e){return function(){return n.props.sendEvent(Object(it.b)(n.props.postId,e))}},n.updateWindowHeight=function(){n.needsUpdatedMeasurements=!0,n.handleScroll()},n.updateCommentSortRef=function(e){n.commentSortRef=e,n.needsUpdatedMeasurements=!0},n.updateCommentFormRef=function(e){n.commentFormRef=e,n.needsUpdatedMeasurements=!0},n.didScrollPastPost=e.shouldScrollToComments&&!!e.post&&!!e.post.numComments,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.a.Component),jr(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.commentId,n=e.setCommentFocus;t&&n(t)}},{key:"componentDidMount",value:function(){var e=this,t=this.commentFormRef,n=this.commentSortRef,o=this.props,r=o.isLoggedIn,i=o.isOverlay,s=o.post,d=o.shouldScrollToComments;i?(this.scrollContainerEl=document.getElementById(ie.c),d&&(t||n)&&s&&s.numComments&&this.scrollToComments(),_.a.write(function(){e.scrollContainerEl&&e.scrollContainerEl.focus()})):this.scrollContainerEl=window,this.needsUpdatedMeasurements=!0,this.addListeners(),this.checkAndSendScreenview(),_.a.read(function(){e.props.isOverlay||Object(L.b)(L.a.CommentsPage,r)})}},{key:"componentWillReceiveProps",value:function(e){e.postId!==this.props.postId&&(this.didRenderLoading=!1),e.commentId&&e.commentId!==this.props.commentId&&this.props.setCommentFocus(e.commentId)}},{key:"componentWillUpdate",value:function(e){this.removeListeners()}},{key:"componentDidUpdate",value:function(e){var t=this;this.needsUpdatedMeasurements=!0,this.addListeners(),this.checkAndSendScreenview(),e.postId!==this.props.postId&&(this.props.post&&this.props.post.numComments?_.a.read(this.handleScroll):_.a.write(function(){Object(T.c)(t.scrollContainerEl,0),_.a.read(t.handleScroll)}),this.props.isOverlay&&_.a.write(function(){t.scrollContainerEl&&t.scrollContainerEl.focus()}))}},{key:"componentWillUnmount",value:function(){this.removeListeners(),this.needsUpdatedMeasurements=!1,this.scrollContainerEl=void 0}},{key:"updateMeasurements",value:function(){this.needsUpdatedMeasurements=!1,this.windowHeight=window.innerHeight,this.commentFormRef?this.scrollPostThreshold=this.commentFormRef.offsetTop:this.commentSortRef?this.scrollPostThreshold=this.commentSortRef.offsetTop:this.scrollPostThreshold=200}},{key:"addListeners",value:function(){this.props.isOverlay&&window.addEventListener("resize",this.updateWindowHeight),this.scrollContainerEl&&this.scrollContainerEl.addEventListener("scroll",this.handleScroll)}},{key:"removeListeners",value:function(){this.props.isOverlay&&window.removeEventListener("resize",this.updateWindowHeight),this.scrollContainerEl&&this.scrollContainerEl.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToComments",value:function(){var e=this;_.a.read(function(){var t=document.getElementById(ie.c);if(t){var n=void 0,o=void 0;e.commentFormRef?(n=e.commentFormRef.offsetTop-80,o=e.commentFormRef.offsetParent):e.commentSortRef?(n=e.commentSortRef.offsetTop-80,o=e.commentSortRef.offsetParent):n=0,o&&(n+=o.offsetTop),_.a.write(function(){Object(T.c)(t,n),e.needsUpdatedMeasurements=!0,setTimeout(function(){return _.a.read(e.handleScroll)})})}})}},{key:"shouldSendScreenview",value:function(){var e=this.props,t=e.apiError,n=e.apiPending,o=e.commentsPageKey;return S.c.has(o)&&(t||!n||this.listLongEnoughForScreenView())}},{key:"listLongEnoughForScreenView",value:function(){return!!this.commentSortRef&&this.commentSortRef.getBoundingClientRect().bottom>window.innerHeight}},{key:"checkAndSendScreenview",value:function(){var e=this;_.a.read(function(){var t=e.props,n=t.commentId,o=t.commentsPageKey,r=t.postId,i=t.sendEvent;if(e.shouldSendScreenview()){var s=S.c.end(o);i(Object(br.a)(o,r,n,k.TimerType.InApp,s))}})}},{key:"isCommentPermalink",value:function(){return void 0!==this.props.commentId}},{key:"render",value:function(){var e=this.props,t=e.apiPending,n=e.closeLocation,o=e.commentsPageKey,r=e.contentGateInfo,i=e.currentUserShowNSFW,s=e.isOverlay,d=e.post,c=e.postId,a=e.subredditOrProfile,l=e.subredditName,p=this.isCommentPermalink();if(!d)return Ir(t?so.e:so.c,{});var u=void 0,m=void 0;return r?r.privateSubreddit?u=ee.a.PrivateSubreddit:r.goldSubreddit?u=ee.a.GoldSubreddit:r.subredditBanned&&(u=ee.a.SubredditBanned,m=r.subredditBanMessage):d.isNSFW&&!i&&(u=ee.a.Nsfw),u&&l?Ir(ee.b,{banMessage:m,subredditName:l,contentGateType:u}):Ir(zr,{closeLocation:n,commentsPageKey:o,isOverlay:s,post:d,subredditOrProfile:a},void 0,Ir("div",{},"PostContentWrapper",Ir(te.a,{isOverlay:s,location:ce.h.CommentsPage}),Ir(Ar,{isCommentPermalink:p,isExclusivePost:!0,isOverlay:s,postId:c,redditStyle:s,scrollerItemRef:this.setPostScrollItemRef}),Ir(Z,{listingName:l||"",isOverlay:s,placement:P.d.ABOVE_THE_FOLD})),this.renderCommentPanes())}},{key:"renderCommentPanes",value:function(){var e=this.props,t=e.apiError,n=e.apiPending,o=e.canCommentAsModerator,r=e.commentId,i=e.commentsPageKey,s=e.fullyLoaded,d=e.headComment,c=e.isLoggedIn,a=e.isOverlay,l=e.language,p=e.location,u=e.openLoginModal,m=e.openRegisterModal,f=e.origin,h=e.post,g=e.postId,y=e.sort,x=e.subredditName,O=e.userPrefs;if(!h)return null;var w=this.isCommentPermalink(),C=[],I=h.isLocked&&!o,S=!w&&!h.isArchived,k=x?"comment.threadLocked.title":"comment.threadLocked.simpleTitle",T=P.s;if(y?T=y:h.suggestedSort?T=h.suggestedSort:O&&O.defaultCommentSort&&(T=O.defaultCommentSort),I)C.push(Ir(pr,{color:oe.a.locked,renderIcon:function(){return Ir(Rr,{})},subtitle:Object(v.a)(l,"comment.threadLocked.subtitle"),title:Object(v.a)(l,k,{subredditName:x})},"commentThreadBanner"));else if(h.isArchived)C.push(Ir(pr,{color:oe.a.locked,renderIcon:function(){return Ir(_r,{})},subtitle:Object(v.a)(l,"comment.threadArchived.subtitle"),title:Object(v.a)(l,"comment.threadArchived.title")},"commentThreadBanner"));else if(S)if(c){var E=Object(M.a)(b.a.replyToPost,g);C.push(Ir(_e,{autofocus:!1,isTopLevelComment:!0,depth:0,draftKey:E,draftType:b.a.replyToPost,editorElementRef:this.updateCommentFormRef,parentCommentId:"replyToPost",submitAction:function(e,t){return A.Ga(l,g,i,E,e,t)},submitButtonText:Object(v.a)(l,"comment.comment")},"form"))}else C.push(Ir(Be,{language:l,location:p,openLoginModal:u,openRegisterModal:m,origin:f},"loggedOutCommentForm"));return C.push(Ir(Bo,{commentId:r,elementRef:this.updateCommentSortRef,isOverlay:a,postId:g,sort:T,suggestedSort:h.suggestedSort,trackClick:this.sendEventWithName},"commentSort")),n?(this.didRenderLoading=!0,C.push(Ir(so.a,{isLoading:n},"commentsPlaceholder"))):t&&!d?C.push(Ir(so.d,{language:l,postId:g,commentId:r,sort:T,apiError:t})):(C.push(Ir(Dr,{redditStyle:!0,renderedInOverlay:a},"commentsWrapper",w&&d&&null!==d.parentId&&Ir(Pr,{},void 0,Ir(Tr,{isOverlay:a,to:Object(j.b)(d.permalink+"?context=8&depth=9")},void 0,Ir(kr,{})," ",Ir(Sr,{},void 0,Object(v.a)(l,"comment.showParentComments")))),Ir(go,{postId:g,commentId:r,commentsPageKey:i,renderedInOverlay:a}))),t&&d?C.push(Ir(so.d,{language:l,postId:g,commentId:r,sort:T,apiError:t},"commentsErrorState")):s||C.push(Ir(so.a,{isLoading:!0},"commentsPlaceholder"))),Ir(ae.a.Provider,{value:this.sendEventWithName},void 0,C)}}]),t}(),Nr=Mr(Object(bt.b)(Lr)),Ar=g()(mr.a).withConfig({componentId:"s1gr9bvy-6"})(["",""],function(e){return e.isOverlay?"background: "+Object(ge.c)(e).body+";":"background: "+Object(he.g)(Object(ge.c)(e).body,Object(ge.c)(e).backgroundImage,Object(ge.c)(e).backgroundImagePosition)+";\n      border-radius: 4px 4px 0 0;"}),Dr=g.a.div.withConfig({componentId:"s1gr9bvy-7"})(["/* TODO: remove once issue around transparent comments backgroundis fixed */box-sizing: border-box;padding-right: 16px;margin: 16px;margin-bottom: 0px;margin-left: 10px;padding-bottom: 16px;// set overlay background to 80% opacity\n",""],function(e){return e.renderedInOverlay?"background: "+Object(l.j)(.2,Object(ge.c)(e).body)+";":"background: "+Object(ge.c)(e).body+";"}),Fr=g.a.div.withConfig({componentId:"s1gr9bvy-8"})(["background: ",";border: 1px solid ",";border-radius: 4px;word-break: break-word;"],function(e){return Object(ge.c)(e).body},function(e){return Object(ge.c)(e).line}),Hr=g()(nr).withConfig({componentId:"s1gr9bvy-9"})(["margin-top: 1px;max-height: initial;position: relative;"]),zr=function(e){var t=e.children,n=e.commentsPageKey,o=e.isOverlay,r=e.post,i=e.subredditOrProfile;return o?Ir(wr,{content:t,sidebar:i&&Ir(nr,{commentsPageKey:n,isOverlay:!0,post:r,subredditName:i.name,subredditId:i.id})}):Ir(ne.a,{subredditId:i?i.id:void 0},void 0,Ir(Cr.d,{maxWidth:re.l,content:Ir(Fr,{redditStyle:!0},void 0,t),disableFullscreen:!0,navBar:i&&u.a.Children.toArray([Ir(ur.a,{disableFullscreen:!0,headerText:i.name,maxWidth:re.l,prefixedHeaderText:i.displayText,subredditOrProfile:i,url:i.url}),"user"!==i.type&&Ir(hr.a,{disableFullscreen:!0,homeUrl:i.url,maxWidth:re.l,subredditId:i.id})]),sidebar:i&&Ir(Hr,{commentsPageKey:n,post:r,subredditName:i.name,subredditId:i.id})}))};t.default=function(e){var t=e.location.state,n=d()(t,se.a.IsOverlay,!1),o=d()(t,se.a.CloseLocation,null),r=d()(t,se.a.ScrollOnLoad,!1);r&&Object(gr.c)(se.a.ScrollOnLoad);var s=e.match.params,c=s.partialCommentId,a=s.partialPostId,l=s.subredditName,p=Object(fe.b)(a),u=c&&Object(ue.b)(c),m=e.location.search,f=i()([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object(E.a)(m)))),h=de.l in f?f[de.l]:"",g=P.Jb.has(h)?h:void 0,b=f.instanceId,v={};g&&(v.sort=g,v.hasSortParam=!0),f.context&&(v.context=parseInt(f.context,10)),f.depth&&(v.depth=parseInt(f.depth,10));var y=Object(R.a)(p,u,v),x=e.location;return Ir(Nr,{location:x,closeLocation:o,commentId:u,commentsPageKey:y,isOverlay:n,postId:p,instanceId:b,shouldScrollToComments:r,sort:g,subredditName:l})}}}]);
//# sourceMappingURL=CommentsPage.45e583165e2b436a5642.js.map